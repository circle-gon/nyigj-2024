/* empty css                    */import"./vue.695b454e.js";import{q as Je,C as c,ab as z,t as P,aF as p,a1 as N,aL as Ie,bv as Qe,G as te,as as Ge,_ as $,az as ht,a2 as f,J as L,O as re,aK as Ee,a0 as x,I as se,a8 as V,a9 as w,b7 as T,aI as xe,aG as Fe,u as It,b2 as Me,w as Ae,b3 as kt,aH as lt,A as ge,$ as q,b9 as Mt,ar as De,bt as Sn,bc as Kt,T as Cn,j as In,l as ae,bw as Rt,ay as kn,aM as We,aO as ue,z as $e,bo as Mn,bs as $n,am as zt,aD as xn,bf as Fn}from"./@vue.6f8187b0.js";import{L as _e}from"./lz-string.bfbf8ec3.js";import{c as Yt}from"./nanoevents.1080beb7.js";import{Y as Tn}from"./vue-next-select.51abf7d0.js";import{D as Pn}from"./vuedraggable.24b135b5.js";import{p as En}from"./vue-textarea-autosize.35804eaf.js";import{s as Vn,u as On}from"./vue-toastification.e087d307.js";import"./sortablejs.2121a25e.js";const Ln=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}};Ln();const Dn="modulepreload",Ut={},qn="./",et=function(t,n){return!n||n.length===0?t():Promise.all(n.map(r=>{if(r=`${qn}${r}`,r in Ut)return;Ut[r]=!0;const i=r.endsWith(".css"),s=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${s}`))return;const d=document.createElement("link");if(d.rel=i?"stylesheet":Dn,i||(d.as="script",d.crossOrigin=""),d.href=r,document.head.appendChild(d),i)return new Promise((l,o)=>{d.addEventListener("load",l),d.addEventListener("error",()=>o(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())},Bn="./projInfo-schema.json",An="Profectus",Rn="A project made in Profectus",zn="nyigj-2024-pressure",Un="",jn="",Gn="",Wn="0.0",Hn="Initial Commit",Jn=!0,Zn=!1,Kn=2,Yn=!0,Xn=null,Qn="",er=["main"],tr=3600,nr=1,rr=!0,ir="base64";var R={$schema:Bn,title:An,description:Rn,id:zn,author:Un,discordName:jn,discordLink:Gn,versionNumber:Wn,versionTitle:Hn,allowGoBack:Jn,defaultShowSmall:Zn,defaultDecimalsShown:Kn,useHeader:Yn,banner:Xn,logo:Qn,initialTabs:er,maxTickLength:tr,offlineLimit:nr,enablePausing:rr,exportEncoding:ir};const ar=Je({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}});var D=window.player=ar;function $t(e){return JSON.stringify(e,(t,n)=>c(n))}var W=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n};const sr=["onClick"],or=z({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const n=P(!1),r=P(null);function i(){t("click"),r.value&&clearTimeout(r.value),n.value=!1,Ge(()=>{n.value=!0,r.value=setTimeout(()=>n.value=!1,500)})}return(s,d)=>(p(),N("button",{onClick:Qe(i,["stop"]),class:te(["feedback",{activated:n.value,left:e.left}])},[Ie(s.$slots,"default",{},void 0,!0)],10,sr))}});var xt=W(or,[["__scopeId","data-v-01a1b95c"]]);const pt=e=>(xe("data-v-ac351c02"),e=e(),Fe(),e),lr={class:"error"},ur={class:"error-title"},cr={class:"error-details",style:{"margin-top":"-10px"}},dr={key:0},gr={class:"instructions"},fr=["href"],mr=pt(()=>f("span",{class:"material-icons",style:{"font-size":"16px"}},"content_paste",-1)),hr=pt(()=>f("span",{style:{"margin-left":"8px","font-size":"medium"}},"Copy Save",-1)),pr=pt(()=>f("br",null,null,-1)),vr={key:0,style:{"margin-top":"20px"}},br=pt(()=>f("h3",null,"Other errors",-1)),yr=[br],_r={class:"error-details"},wr={key:0,style:{"margin-top":"10px"}},Nr={key:1,style:{"margin-top":"10px"}},Sr=z({__name:"Error",props:{errors:null},setup(e){const t=e,n=$(()=>t.errors[0]),r=$(()=>t.errors.map(d=>d.stack==null?[]:d.stack.split(`
`))),i=$(()=>t.errors.map(d=>d.cause==null?[]:(typeof d.cause=="string"?d.cause:JSON.stringify(d.cause)).split(`
`)));function s(){let d=$t(D);switch(R.exportEncoding){default:console.warn(`Unknown save encoding: ${R.exportEncoding}. Defaulting to lz`);case"lz":d=_e.compressToUTF16(d);break;case"base64":d=btoa(unescape(encodeURIComponent(d)));break;case"plain":break}console.log(d);const l=document.createElement("textarea");l.value=d,document.body.appendChild(l),l.select(),l.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(l)}return ht(()=>{D.autosave=!1,D.devSpeed=0}),(d,l)=>(p(),N("div",lr,[f("h1",ur,L(c(n).name)+": "+L(c(n).message),1),f("div",cr,[c(n).cause?(p(),N("div",dr,[(p(!0),N(re,null,Ee(c(i)[0],o=>(p(),N("div",{key:o},L(o),1))),128))])):x("",!0),c(n).stack?(p(),N("div",{key:1,style:se(c(n).cause?"margin-top: 10px":"")},[(p(!0),N(re,null,Ee(c(r)[0],o=>(p(),N("div",{key:o},L(o),1))),128))],4)):x("",!0)]),f("div",gr,[V(" Check the console for more details, and consider sharing it with the developers on "),f("a",{href:c(R).discordLink||"https://discord.gg/yJ4fjnjU54",class:"discord-link"},"discord",8,fr),V("! "),w(xt,{onClick:s,class:"button",style:{display:"inline-flex"}},{default:T(()=>[mr,hr]),_:1}),pr,e.errors.length>1?(p(),N("div",vr,yr)):x("",!0),(p(!0),N(re,null,Ee(e.errors.slice(1),(o,m)=>(p(),N("div",{key:m,style:{"margin-top":"20px"}},[f("details",_r,[f("summary",null,L(o.name)+": "+L(o.message),1),o.cause?(p(),N("div",wr,[(p(!0),N(re,null,Ee(c(i)[m+1],b=>(p(),N("div",{key:b},L(b),1))),128))])):x("",!0),o.stack?(p(),N("div",Nr,[(p(!0),N(re,null,Ee(c(r)[m+1],b=>(p(),N("div",{key:b},L(b),1))),128))])):x("",!0)])]))),128))])]))}});var Xt=W(Sr,[["__scopeId","data-v-ac351c02"]]);class Cr{constructor(t){this.map=new Map,this.first=void 0,this.last=void 0,this.maxSize=t}get size(){return this.map.size}get(t){const n=this.map.get(t);if(n!==void 0)return n!==this.first&&(n===this.last?(this.last=n.prev,this.last.next=void 0):(n.prev.next=n.next,n.next.prev=n.prev),n.next=this.first,this.first.prev=n,this.first=n),n.value}set(t,n){if(this.maxSize<1)return;if(this.map.has(t))throw new Error("Cannot update existing keys in the cache");const r=new Ir(t,n);for(this.first===void 0?(this.first=r,this.last=r):(r.next=this.first,this.first.prev=r,this.first=r),this.map.set(t,r);this.map.size>this.maxSize;){const i=this.last;this.map.delete(i.key),this.last=i.prev,this.last.next=void 0}}}class Ir{constructor(t,n){this.next=void 0,this.prev=void 0,this.key=t,this.value=n}}const _t=17,kr=9e15,Mr=Math.log10(9e15),$r=1/9e15,xr=308,Fr=-324,jt=5,Tr=(1<<10)-1,Pr=function(){const e=[];for(let n=Fr+1;n<=xr;n++)e.push(Number("1e"+n));const t=323;return function(n){return e[n+t]}}(),Te=[2,Math.E,3,4,5,6,7,8,9,10],Er=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],Vr=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]];let h=function(t){return u.fromValue_noAlloc(t)},F=function(e,t,n){return u.fromComponents(e,t,n)},E=function(t,n,r){return u.fromComponents_noNormalize(t,n,r)};const Se=function(t,n){const r=n+1,i=Math.ceil(Math.log10(Math.abs(t))),s=Math.round(t*Math.pow(10,r-i))*Math.pow(10,i-r);return parseFloat(s.toFixed(Math.max(r-i,0)))},wt=function(e){return Math.sign(e)*Math.log10(Math.abs(e))},Or=function(e){if(!isFinite(e))return e;if(e<-50)return e===Math.trunc(e)?Number.NEGATIVE_INFINITY:0;let t=1;for(;e<10;)t=t*e,++e;e-=1;let n=.9189385332046727;n=n+(e+.5)*Math.log(e),n=n-e;const r=e*e;let i=e;return n=n+1/(12*i),i=i*r,n=n+1/(360*i),i=i*r,n=n+1/(1260*i),i=i*r,n=n+1/(1680*i),i=i*r,n=n+1/(1188*i),i=i*r,n=n+691/(360360*i),i=i*r,n=n+7/(1092*i),i=i*r,n=n+3617/(122400*i),Math.exp(n)/t},Qt=.5671432904097838,Gt=function(e,t=1e-10){let n,r;if(!Number.isFinite(e)||e===0)return e;if(e===1)return Qt;e<10?n=0:n=Math.log(e)-Math.log(Math.log(e));for(let i=0;i<100;++i){if(r=(e*Math.exp(-n)+n*n)/(n+1),Math.abs(r-n)<t*Math.abs(r))return r;n=r}throw Error(`Iteration failed to converge: ${e.toString()}`)};function Wt(e,t=1e-10){let n,r,i,s;if(!Number.isFinite(e.mag)||e.eq(u.dZero))return e;if(e.eq(u.dOne))return u.fromNumber(Qt);n=u.ln(e);for(let d=0;d<100;++d){if(r=n.neg().exp(),i=n.sub(e.mul(r)),s=n.sub(i.div(n.add(1).sub(n.add(2).mul(i).div(u.mul(2,n).add(2))))),u.abs(s.sub(n)).lt(u.abs(s).mul(t)))return s;n=s}throw Error(`Iteration failed to converge: ${e.toString()}`)}const g=class{constructor(e){this.sign=0,this.mag=0,this.layer=0,e instanceof g?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"&&this.fromString(e)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/Pr(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer=0,this.exponent=0))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,n){return new g().fromComponents(e,t,n)}static fromComponents_noNormalize(e,t,n){return new g().fromComponents_noNormalize(e,t,n)}static fromMantissaExponent(e,t){return new g().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new g().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new g().fromDecimal(e)}static fromNumber(e){return new g().fromNumber(e)}static fromString(e){return new g().fromString(e)}static fromValue(e){return new g().fromValue(e)}static fromValue_noAlloc(e){if(e instanceof g)return e;if(typeof e=="string"){const t=g.fromStringCache.get(e);return t!==void 0?t:g.fromString(e)}else return typeof e=="number"?g.fromNumber(e):g.dZero}static abs(e){return h(e).abs()}static neg(e){return h(e).neg()}static negate(e){return h(e).neg()}static negated(e){return h(e).neg()}static sign(e){return h(e).sign}static sgn(e){return h(e).sign}static round(e){return h(e).round()}static floor(e){return h(e).floor()}static ceil(e){return h(e).ceil()}static trunc(e){return h(e).trunc()}static add(e,t){return h(e).add(t)}static plus(e,t){return h(e).add(t)}static sub(e,t){return h(e).sub(t)}static subtract(e,t){return h(e).sub(t)}static minus(e,t){return h(e).sub(t)}static mul(e,t){return h(e).mul(t)}static multiply(e,t){return h(e).mul(t)}static times(e,t){return h(e).mul(t)}static div(e,t){return h(e).div(t)}static divide(e,t){return h(e).div(t)}static recip(e){return h(e).recip()}static reciprocal(e){return h(e).recip()}static reciprocate(e){return h(e).reciprocate()}static cmp(e,t){return h(e).cmp(t)}static cmpabs(e,t){return h(e).cmpabs(t)}static compare(e,t){return h(e).cmp(t)}static isNaN(e){return e=h(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=h(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return h(e).eq(t)}static equals(e,t){return h(e).eq(t)}static neq(e,t){return h(e).neq(t)}static notEquals(e,t){return h(e).notEquals(t)}static lt(e,t){return h(e).lt(t)}static lte(e,t){return h(e).lte(t)}static gt(e,t){return h(e).gt(t)}static gte(e,t){return h(e).gte(t)}static max(e,t){return h(e).max(t)}static min(e,t){return h(e).min(t)}static minabs(e,t){return h(e).minabs(t)}static maxabs(e,t){return h(e).maxabs(t)}static clamp(e,t,n){return h(e).clamp(t,n)}static clampMin(e,t){return h(e).clampMin(t)}static clampMax(e,t){return h(e).clampMax(t)}static cmp_tolerance(e,t,n){return h(e).cmp_tolerance(t,n)}static compare_tolerance(e,t,n){return h(e).cmp_tolerance(t,n)}static eq_tolerance(e,t,n){return h(e).eq_tolerance(t,n)}static equals_tolerance(e,t,n){return h(e).eq_tolerance(t,n)}static neq_tolerance(e,t,n){return h(e).neq_tolerance(t,n)}static notEquals_tolerance(e,t,n){return h(e).notEquals_tolerance(t,n)}static lt_tolerance(e,t,n){return h(e).lt_tolerance(t,n)}static lte_tolerance(e,t,n){return h(e).lte_tolerance(t,n)}static gt_tolerance(e,t,n){return h(e).gt_tolerance(t,n)}static gte_tolerance(e,t,n){return h(e).gte_tolerance(t,n)}static pLog10(e){return h(e).pLog10()}static absLog10(e){return h(e).absLog10()}static log10(e){return h(e).log10()}static log(e,t){return h(e).log(t)}static log2(e){return h(e).log2()}static ln(e){return h(e).ln()}static logarithm(e,t){return h(e).logarithm(t)}static pow(e,t){return h(e).pow(t)}static pow10(e){return h(e).pow10()}static pow_base(e,t){return h(e).pow_base(t)}static root(e,t){return h(e).root(t)}static factorial(e,t){return h(e).factorial()}static gamma(e,t){return h(e).gamma()}static lngamma(e,t){return h(e).lngamma()}static exp(e){return h(e).exp()}static sqr(e){return h(e).sqr()}static sqrt(e){return h(e).sqrt()}static cube(e){return h(e).cube()}static cbrt(e){return h(e).cbrt()}static tetrate(e,t=2,n=E(1,0,1)){return h(e).tetrate(t,n)}static iteratedexp(e,t=2,n=E(1,0,1)){return h(e).iteratedexp(t,n)}static iteratedlog(e,t=10,n=1){return h(e).iteratedlog(t,n)}static layeradd10(e,t){return h(e).layeradd10(t)}static layeradd(e,t,n=10){return h(e).layeradd(t,n)}static slog(e,t=10){return h(e).slog(t)}static lambertw(e){return h(e).lambertw()}static ssqrt(e){return h(e).ssqrt()}static pentate(e,t=2,n=E(1,0,1)){return h(e).pentate(t,n)}static sin(e){return h(e).sin()}static cos(e){return h(e).cos()}static tan(e){return h(e).tan()}static asin(e){return h(e).asin()}static acos(e){return h(e).acos()}static atan(e){return h(e).atan()}static sinh(e){return h(e).sinh()}static cosh(e){return h(e).cosh()}static tanh(e){return h(e).tanh()}static asinh(e){return h(e).asinh()}static acosh(e){return h(e).acosh()}static atanh(e){return h(e).atanh()}static affordGeometricSeries(e,t,n,r){return this.affordGeometricSeries_core(h(e),h(t),h(n),r)}static sumGeometricSeries(e,t,n,r){return this.sumGeometricSeries_core(e,h(t),h(n),r)}static affordArithmeticSeries(e,t,n,r){return this.affordArithmeticSeries_core(h(e),h(t),h(n),h(r))}static sumArithmeticSeries(e,t,n,r){return this.sumArithmeticSeries_core(h(e),h(t),h(n),h(r))}static efficiencyOfPurchase(e,t,n){return this.efficiencyOfPurchase_core(h(e),h(t),h(n))}static randomDecimalForTesting(e){if(Math.random()*20<1)return E(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return E(t,0,1);const n=Math.floor(Math.random()*(e+1));let r=n===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(r=Math.trunc(r));let i=Math.pow(10,r);return Math.random()>.9&&(i=Math.trunc(i)),F(t,n,i)}static affordGeometricSeries_core(e,t,n,r){const i=t.mul(n.pow(r));return g.floor(e.div(i).mul(n.sub(1)).add(1).log10().div(n.log10()))}static sumGeometricSeries_core(e,t,n,r){return t.mul(n.pow(r)).mul(g.sub(1,n.pow(e))).div(g.sub(1,n))}static affordArithmeticSeries_core(e,t,n,r){const s=t.add(r.mul(n)).sub(n.div(2)),d=s.pow(2);return s.neg().add(d.add(n.mul(e).mul(2)).sqrt()).div(n).floor()}static sumArithmeticSeries_core(e,t,n,r){const i=t.add(r.mul(n));return e.div(2).mul(i.mul(2).plus(e.sub(1).mul(n)))}static efficiencyOfPurchase_core(e,t,n){return e.div(t).add(e.div(n))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<$r)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=kr)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<Mr&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this.normalize(),this}fromComponents_noNormalize(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){const t=e,n=g.fromStringCache.get(t);if(n!==void 0)return this.fromDecimal(n);e=e.replace(",","");const r=e.split("^^^");if(r.length===2){const I=parseFloat(r[0]),C=parseFloat(r[1]),j=r[1].split(";");let H=1;if(j.length===2&&(H=parseFloat(j[1]),isFinite(H)||(H=1)),isFinite(I)&&isFinite(C)){const k=g.pentate(I,C,H);return this.sign=k.sign,this.layer=k.layer,this.mag=k.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}const i=e.split("^^");if(i.length===2){const I=parseFloat(i[0]),C=parseFloat(i[1]),j=i[1].split(";");let H=1;if(j.length===2&&(H=parseFloat(j[1]),isFinite(H)||(H=1)),isFinite(I)&&isFinite(C)){const k=g.tetrate(I,C,H);return this.sign=k.sign,this.layer=k.layer,this.mag=k.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}const s=e.split("^");if(s.length===2){const I=parseFloat(s[0]),C=parseFloat(s[1]);if(isFinite(I)&&isFinite(C)){const j=g.pow(I,C);return this.sign=j.sign,this.layer=j.layer,this.mag=j.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}e=e.trim().toLowerCase();let d,l,o=e.split("pt");if(o.length===2){d=10,l=parseFloat(o[0]),o[1]=o[1].replace("(",""),o[1]=o[1].replace(")","");let I=parseFloat(o[1]);if(isFinite(I)||(I=1),isFinite(d)&&isFinite(l)){const C=g.tetrate(d,l,I);return this.sign=C.sign,this.layer=C.layer,this.mag=C.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}if(o=e.split("p"),o.length===2){d=10,l=parseFloat(o[0]),o[1]=o[1].replace("(",""),o[1]=o[1].replace(")","");let I=parseFloat(o[1]);if(isFinite(I)||(I=1),isFinite(d)&&isFinite(l)){const C=g.tetrate(d,l,I);return this.sign=C.sign,this.layer=C.layer,this.mag=C.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}const m=e.split("e"),b=m.length-1;if(b===0){const I=parseFloat(e);if(isFinite(I))return this.fromNumber(I),g.fromStringCache.size>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}else if(b===1){const I=parseFloat(e);if(isFinite(I)&&I!==0)return this.fromNumber(I),g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}const v=e.split("e^");if(v.length===2){this.sign=1,v[0].charAt(0)=="-"&&(this.sign=-1);let I="";for(let C=0;C<v[1].length;++C){const j=v[1].charCodeAt(C);if(j>=43&&j<=57||j===101)I+=v[1].charAt(C);else return this.layer=parseFloat(I),this.mag=parseFloat(v[1].substr(C+1)),this.normalize(),g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}if(b<1)return this.sign=0,this.layer=0,this.mag=0,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this;const y=parseFloat(m[0]);if(y===0)return this.sign=0,this.layer=0,this.mag=0,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this;let S=parseFloat(m[m.length-1]);if(b>=2){const I=parseFloat(m[m.length-2]);isFinite(I)&&(S*=Math.sign(I),S+=wt(I))}if(!isFinite(y))this.sign=m[0]==="-"?-1:1,this.layer=b,this.mag=S;else if(b===1)this.sign=Math.sign(y),this.layer=1,this.mag=S+Math.log10(Math.abs(y));else if(this.sign=Math.sign(y),this.layer=b,b===2){const I=g.mul(F(1,2,S),h(y));return this.sign=I.sign,this.layer=I.layer,this.mag=I.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}else this.mag=S;return this.normalize(),g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}fromValue(e){return e instanceof g?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:Se(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:Se(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=jt?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):Se(this.m,e)+"e"+Se(this.e,e):this.layer===1?Se(this.m,e)+"e"+Se(this.e,e):this.layer<=jt?(this.sign===-1?"-":"")+"e".repeat(this.layer)+Se(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+Se(this.mag,e)}abs(){return E(this.sign===0?0:1,this.layer,this.mag)}neg(){return E(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?g.dZero:this.layer===0?F(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?g.dZero:this.layer===0?F(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?g.dZero:this.layer===0?F(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?g.dZero:this.layer===0?F(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=h(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return E(0,0,0);let n,r;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(g.cmpabs(this,t)>0?(n=this,r=t):(n=t,r=this),n.layer===0&&r.layer===0)return g.fromNumber(n.sign*n.mag+r.sign*r.mag);const i=n.layer*Math.sign(n.mag),s=r.layer*Math.sign(r.mag);if(i-s>=2)return n;if(i===0&&s===-1){if(Math.abs(r.mag-Math.log10(n.mag))>_t)return n;{const d=Math.pow(10,Math.log10(n.mag)-r.mag),l=r.sign+n.sign*d;return F(Math.sign(l),1,r.mag+Math.log10(Math.abs(l)))}}if(i===1&&s===0){if(Math.abs(n.mag-Math.log10(r.mag))>_t)return n;{const d=Math.pow(10,n.mag-Math.log10(r.mag)),l=r.sign+n.sign*d;return F(Math.sign(l),1,Math.log10(r.mag)+Math.log10(Math.abs(l)))}}if(Math.abs(n.mag-r.mag)>_t)return n;{const d=Math.pow(10,n.mag-r.mag),l=r.sign+n.sign*d;return F(Math.sign(l),1,r.mag+Math.log10(Math.abs(l)))}}plus(e){return this.add(e)}sub(e){return this.add(h(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=h(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return E(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return E(this.sign*t.sign,0,1);let n,r;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(n=this,r=t):(n=t,r=this),n.layer===0&&r.layer===0)return g.fromNumber(n.sign*r.sign*n.mag*r.mag);if(n.layer>=3||n.layer-r.layer>=2)return F(n.sign*r.sign,n.layer,n.mag);if(n.layer===1&&r.layer===0)return F(n.sign*r.sign,1,n.mag+Math.log10(r.mag));if(n.layer===1&&r.layer===1)return F(n.sign*r.sign,1,n.mag+r.mag);if(n.layer===2&&r.layer===1){const i=F(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(F(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)));return F(n.sign*r.sign,i.layer+1,i.sign*i.mag)}if(n.layer===2&&r.layer===2){const i=F(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(F(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)));return F(n.sign*r.sign,i.layer+1,i.sign*i.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=h(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?g.dNaN:this.layer===0?F(this.sign,0,1/this.mag):F(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=h(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=h(e),n=this.mag>0?this.layer:-this.layer,r=t.mag>0?t.layer:-t.layer;return n>r?1:n<r?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=h(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=h(e);return this.lt(t)?t:this}min(e){const t=h(e);return this.gt(t)?t:this}maxabs(e){const t=h(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=h(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const n=h(e);return this.eq_tolerance(n,t)?0:this.cmp(n)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const n=h(e);if(t==null&&(t=1e-7),this.sign!==n.sign||Math.abs(this.layer-n.layer)>1)return!1;let r=this.mag,i=n.mag;return this.layer>n.layer&&(i=wt(i)),this.layer<n.layer&&(r=wt(r)),Math.abs(r-i)<=t*Math.max(Math.abs(r),Math.abs(i))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const n=h(e);return!this.eq_tolerance(n,t)&&this.lt(n)}lte_tolerance(e,t){const n=h(e);return this.eq_tolerance(n,t)||this.lt(n)}gt_tolerance(e,t){const n=h(e);return!this.eq_tolerance(n,t)&&this.gt(n)}gte_tolerance(e,t){const n=h(e);return this.eq_tolerance(n,t)||this.gt(n)}pLog10(){return this.lt(g.dZero)?g.dZero:this.log10()}absLog10(){return this.sign===0?g.dNaN:this.layer>0?F(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):F(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?g.dNaN:this.layer>0?F(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):F(this.sign,0,Math.log10(this.mag))}log(e){return e=h(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?g.dNaN:this.layer===0&&e.layer===0?F(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):g.div(this.log10(),e.log10())}log2(){return this.sign<=0?g.dNaN:this.layer===0?F(this.sign,0,Math.log2(this.mag)):this.layer===1?F(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?F(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):F(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?g.dNaN:this.layer===0?F(this.sign,0,Math.log(this.mag)):this.layer===1?F(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?F(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):F(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=h(e),n=this,r=t;if(n.sign===0)return r.eq(0)?E(1,0,1):n;if(n.sign===1&&n.layer===0&&n.mag===1)return n;if(r.sign===0)return E(1,0,1);if(r.sign===1&&r.layer===0&&r.mag===1)return n;const i=n.absLog10().mul(r).pow10();return this.sign===-1?Math.abs(r.toNumber()%2)%2===1?i.neg():Math.abs(r.toNumber()%2)%2===0?i:g.dNaN:i}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return g.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return F(1,0,t);if(e.sign===0)return g.dOne;e=E(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?F(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?F(-e.sign,e.layer+1,-e.mag):g.dOne}pow_base(e){return h(e).pow(this)}root(e){const t=h(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?g.exp(g.mul(this,g.ln(this).sub(1))):g.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(E(1,0,24)))return g.fromNumber(Or(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const n=e*e;let r=e,i=12*r,s=1/i,d=t+s;if(d===t||(t=d,r=r*n,i=360*r,s=1/i,d=t-s,d===t))return g.exp(t);t=d,r=r*n,i=1260*r;let l=1/i;return t=t+l,r=r*n,i=1680*r,l=1/i,t=t-l,g.exp(t)}else return this.layer===1?g.exp(g.mul(this,g.ln(this).sub(1))):g.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?g.dOne:this.layer===0&&this.mag<=709.7?g.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?F(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?F(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):F(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return g.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return F(1,2,Math.log10(this.mag)-.3010299956639812);{const e=g.div(E(this.sign,this.layer-1,this.mag),E(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=E(1,0,1)){if(e===1)return g.pow(this,t);if(e===0)return new g(t);if(this.eq(g.dOne))return g.dOne;if(this.eq(-1))return g.pow(this,t);if(e===Number.POSITIVE_INFINITY){const i=this.toNumber();if(i<=1.444667861009766&&i>=.06598803584531254){if(i>1.444667861009099)return g.fromNumber(Math.E);const s=g.ln(this).neg();return s.lambertw().div(s)}else return i>1.444667861009766?g.fromNumber(Number.POSITIVE_INFINITY):g.dNaN}if(this.eq(g.dZero)){let i=Math.abs((e+1)%2);return i>1&&(i=2-i),g.fromNumber(i)}if(e<0)return g.iteratedlog(t,this,-e);t=h(t);const n=e;e=Math.trunc(e);const r=n-e;if(this.gt(g.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let i=0;i<e;++i){const s=t;if(t=this.pow(t),s.eq(t))return t}if(r!=0){const i=this.pow(t);return t.mul(1-r).add(i.mul(r))}return t}r!==0&&(t.eq(g.dOne)?this.gt(10)?t=this.pow(r):(t=g.fromNumber(g.tetrate_critical(this.toNumber(),r)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(r):t=t.layeradd(r,this));for(let i=0;i<e;++i){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return E(t.sign,t.layer+(e-i-1),t.mag);if(i>1e4)return t}return t}iteratedexp(e=2,t=E(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return g.tetrate(e,-t,this);e=h(e);let n=g.fromDecimal(this);const r=t;t=Math.trunc(t);const i=r-t;if(n.layer-e.layer>3){const s=Math.min(t,n.layer-e.layer-3);t-=s,n.layer-=s}for(let s=0;s<t;++s){if(n=n.log(e),!isFinite(n.layer)||!isFinite(n.mag))return n.normalize();if(s>1e4)return n}return i>0&&i<1&&(e.eq(10)?n=n.layeradd10(-i):n=n.layeradd(-i,e)),n}slog(e=10,t=100){let n=.001,r=!1,i=!1,s=this.slog_internal(e).toNumber();for(let d=1;d<t;++d){const o=new g(e).tetrate(s).gt(this);if(d>1&&i!=o&&(r=!0),i=o,r?n/=2:n*=2,n=Math.abs(n)*(o?-1:1),s+=n,n===0)break}return g.fromNumber(s)}slog_internal(e=10){if(e=h(e),e.lte(g.dZero)||e.eq(g.dOne))return g.dNaN;if(e.lt(g.dOne))return this.eq(g.dOne)?g.dZero:this.eq(g.dZero)?g.dNegOne:g.dNaN;if(this.mag<0||this.eq(g.dZero))return g.dNegOne;let t=0,n=g.fromDecimal(this);if(n.layer-e.layer>3){const r=n.layer-e.layer-3;t+=r,n.layer-=r}for(let r=0;r<100;++r)if(n.lt(g.dZero))n=g.pow(e,n),t-=1;else{if(n.lte(g.dOne))return g.fromNumber(t+g.slog_critical(e.toNumber(),n.toNumber()));t+=1,n=g.log(n,e)}return g.fromNumber(t)}static slog_critical(e,t){return e>10?t-1:g.critical_section(e,t,Vr)}static tetrate_critical(e,t){return g.critical_section(e,t,Er)}static critical_section(e,t,n){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let r=0,i=0;for(let d=0;d<Te.length;++d)if(Te[d]==e){r=n[d][Math.floor(t)],i=n[d][Math.ceil(t)];break}else if(Te[d]<e&&Te[d+1]>e){const l=(e-Te[d])/(Te[d+1]-Te[d]);r=n[d][Math.floor(t)]*(1-l)+n[d+1][Math.floor(t)]*l,i=n[d][Math.ceil(t)]*(1-l)+n[d+1][Math.ceil(t)]*l;break}const s=t-Math.floor(t);return r<=0||i<=0?r*(1-s)+i*s:Math.pow(e,Math.log(r)/Math.log(e)*(1-s)+Math.log(i)/Math.log(e)*s)}layeradd10(e){e=g.fromValue_noAlloc(e).toNumber();const t=g.fromDecimal(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const n=Math.trunc(e);e-=n,t.layer+=n}if(e<=-1){const n=Math.trunc(e);if(e-=n,t.layer+=n,t.layer<0)for(let r=0;r<100;++r){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const r=this.slog(t).toNumber()+e;return r>=0?g.tetrate(t,r):Number.isFinite(r)?r>=-1?g.log(g.tetrate(t,r+1),t):g.log(g.log(g.tetrate(t,r+2),t),t):g.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return g.fromNumber(Gt(this.toNumber()));if(this.layer===0)return g.fromNumber(Gt(this.sign*this.mag));if(this.layer===1)return Wt(this);if(this.layer===2)return Wt(this);if(this.layer>=3)return E(this.sign,this.layer-1,this.mag);throw new Error("Unhandled behavior in lambertw()")}ssqrt(){if(this.sign==1&&this.layer>=3)return E(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=E(1,0,1)){t=h(t);const n=e;e=Math.trunc(e);const r=n-e;r!==0&&(t.eq(g.dOne)?(++e,t=g.fromNumber(r)):this.eq(10)?t=t.layeradd10(r):t=t.layeradd(r,this));for(let i=0;i<e;++i){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(i>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?g.fromNumber(Math.sin(this.sign*this.mag)):E(0,0,0)}cos(){return this.mag<0?g.dOne:this.layer===0?g.fromNumber(Math.cos(this.sign*this.mag)):E(0,0,0)}tan(){return this.mag<0?this:this.layer===0?g.fromNumber(Math.tan(this.sign*this.mag)):E(0,0,0)}asin(){return this.mag<0?this:this.layer===0?g.fromNumber(Math.asin(this.sign*this.mag)):E(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?g.fromNumber(Math.acos(this.toNumber())):this.layer===0?g.fromNumber(Math.acos(this.sign*this.mag)):E(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?g.fromNumber(Math.atan(this.sign*this.mag)):g.fromNumber(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return g.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return g.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?E(Number.NaN,Number.NaN,Number.NaN):g.ln(this.add(1).div(g.fromNumber(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(g.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};let u=g;u.fromStringCache=new Cr(Tr);u.dZero=E(0,0,0);u.dOne=E(1,0,1);u.dNegOne=E(-1,0,1);u.dTwo=E(1,0,2);u.dTen=E(1,0,10);u.dNaN=E(Number.NaN,Number.NaN,Number.NaN);u.dInf=E(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);u.dNegInf=E(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);u.dNumberMax=F(1,0,Number.MAX_VALUE);u.dNumberMin=F(1,0,Number.MIN_VALUE);h=u.fromValue_noAlloc;F=u.fromComponents;E=u.fromComponents_noNormalize;u.fromMantissaExponent;u.fromMantissaExponent_noNormalize;const Lr=new u(1);function Ye(e,t,n=!0){let r=u.log10(e).floor(),i=u.div(e,u.pow(10,r));i.toStringWithDecimalPlaces(t)==="10"&&(i=Lr,r=r.add(1));const s=r.gte(1e9)?he(r,Math.max(Math.max(t,3),R.defaultDecimalsShown)):r.gte(1e4)?dt(r,0):r.toStringWithDecimalPlaces(0);return n?i.toStringWithDecimalPlaces(t)+"e"+s:"e"+s}function dt(e,t){if(e==null)return"NaN";if(e=new u(e),e.mag<.001)return 0 .toFixed(t);const r=e.toStringWithDecimalPlaces(t).split(".");return r[0]=r[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),r.length==1?r[0]:r[0]+"."+r[1]}function en(e,t){return e==null?"NaN":(e=new u(e),e.mag<1e-4?0 .toFixed(t):(e.mag<.1&&t!==0&&(t=Math.max(Math.max(t,e.log10().negate().ceil().toNumber()),R.defaultDecimalsShown)),e.toStringWithDecimalPlaces(t)))}const Dr=new u("eeee1000"),qr=new u("e100000"),Ht=new u("e1000"),tn=new u(1e9),Br=new u(1e6),Ar=new u(1e3),Rr=new u(.98),zr=new u(.001),nn=new u(0);function he(e,t,n){if(t==null&&(t=R.defaultDecimalsShown),n=n!=null?n:R.defaultShowSmall,e=new u(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag))return"NaN";if(e.sign<0)return"-"+he(e.neg(),t);if(e.mag===Number.POSITIVE_INFINITY)return"Infinity";if(e.gte(Dr)){const r=e.slog();return r.gte(Br)?"F"+he(r.floor()):u.pow(10,r.sub(r.floor())).toStringWithDecimalPlaces(3)+"F"+dt(r.floor(),0)}else{if(e.gte(qr))return Ye(e,0,!1);if(e.gte(Ht))return Ye(e,0);if(e.gte(tn))return Ye(e,t);if(e.gte(Ar))return dt(e,0);if(e.gte(zr)||!n)return en(e,t);if(e.eq(nn))return 0 .toFixed(t)}return e=an(e),e.lt(Ht)?Ye(e,t).replace(/([^(?:e|F)]*)$/,"-$1"):he(e,t)+"\u207B\xB9"}function me(e){return e=new u(e),e.sign<0?"-"+me(e.neg()):e.gte(tn)||e.lte(Rr)&&!e.eq(nn)?he(e):he(e,0)}function rn(e){return u.lt(e,0)?"-"+rn(u.neg(e)):u.gt(e,2**51)?he(u.div(e,31536e3))+"y":(e=new u(e).toNumber(),e<60?he(e)+"s":e<3600?me(Math.floor(e/60))+"m "+he(e%60)+"s":e<86400?me(Math.floor(e/3600))+"h "+me(Math.floor(e/60)%60)+"m "+me(e%60)+"s":e<31536e3?me(Math.floor(e/84600)%365)+"d "+me(Math.floor(e/3600)%24)+"h "+me(Math.floor(e/60)%60)+"m":me(Math.floor(e/31536e3))+"y "+me(Math.floor(e/84600)%365)+"d "+me(Math.floor(e/3600)%24)+"h")}function Ur(e,t,n){e=new u(e);let r=e.toStringWithDecimalPlaces(t);return new u(r).gte(n)&&(r=u.sub(n,Math.pow(.1,t)).toStringWithDecimalPlaces(t)),r}function jr(e,t){return he(e,t,!0)}function an(e){let t=u.log10(e).ceil();const n=u.div(e,u.pow(10,t));return t=t.neg(),e=new u(10).pow(t).times(n),e}var Gr=Object.freeze(Object.defineProperty({__proto__:null,default:u,exponentialFormat:Ye,commaFormat:dt,regularFormat:en,format:he,formatWhole:me,formatTime:rn,toPlaces:Ur,formatSmall:jr,invertOOM:an},Symbol.toStringTag,{value:"Module"}));const{exponentialFormat:Wr,commaFormat:Hr,regularFormat:Jr,format:tt,formatWhole:Ft,formatTime:Tt,toPlaces:Zr,formatSmall:Kr,invertOOM:Yr}=Gr;window.Decimal=u;window.exponentialFormat=Wr;window.commaFormat=Hr;window.regularFormat=Jr;window.format=tt;window.formatWhole=Ft;window.formatTime=Tt;window.toPlaces=Zr;window.formatSmall=Kr;window.invertOOM=Yr;function Xr(e){let t=e.replace(/([A-Z])/g," $1");return t=t.charAt(0).toUpperCase()+t.slice(1),t}function Nt(e){return typeof e=="function"}var U=(e=>(e.Up="Up",e.Down="Down",e.Left="Left",e.Right="Right",e.Default="Up",e))(U||{});const nt=Symbol("DoNotCache");function A(e,t){const n=e[t];Nt(n)&&n.length===0&&!n[nt]?e[t]=$(n.bind(e)):Nt(n)&&(e[t]=n.bind(e),e[t][nt]=!0)}function Jt(e){return Nt(e)&&!e[nt]&&(e=$(e)),e}const He=Symbol("Component"),at=Symbol("GatherProps");let Qr=0;function Pt(e="feature-"){return e+Qr++}var qe=(e=>(e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden",e[e.None=2]="None",e))(qe||{});function rt(e){const t=c(e);return t!==2&&t!==!1}function Et(e){return c(e)===1}function ie(e){return e[nt]=!0,e}function Le(e,t,n){e[t]===void 0&&n!=null&&(e[t]=n)}var Z=window.state=It({lastTenTicks:[],hasNaN:!1,NaNPath:[],errors:Je([])});const Pe={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var Vt=(e=>(e.Classic="classic",e.Paper="paper",e.Nordic="nordic",e.Aqua="aqua",e))(Vt||{}),vt={classic:Pe,paper:{...Pe,variables:{...Pe.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...Pe,variables:{...Pe.variables,"--foreground":"#D8DEE9","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...Pe,variables:{...Pe.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}}};const pe=Yt();"fonts"in document&&(document.fonts.onloadingdone=()=>pe.emit("fontsLoaded"));var ei=Object.freeze(Object.defineProperty({__proto__:null,globalBus:pe},Symbol.toStringTag,{value:"Module"}));function sn(e={}){return Object.assign({id:`${R.id}-0`,name:"Default Save",tabs:R.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:R.id,modVersion:R.versionNumber,layers:{}},e)}function de(e){const t=_e.compressToUTF16($t(e!=null?e:D));return localStorage.setItem((e!=null?e:D).id,t),t}async function ti(){ii();try{let e=localStorage.getItem(X.active);if(e==null){await Ve(Ue());return}if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=_e.decompressFromUTF16(e);else throw"Unable to determine save encoding";const t=JSON.parse(e);if(t.modID!==R.id){await Ve(Ue());return}t.id=X.active,await Ve(t)}catch(e){console.error(`Failed to load save. Falling back to new save.
`,e),await Ve(Ue())}}function Ue(){const e=ut(),t=sn({id:e});return de(t),X.saves.push(e),t}function ut(){let e,t=0;do e=`${R.id}-${t++}`;while(localStorage.getItem(e)!=null);return e}const ni=P(!1);async function Ve(e){console.info("Loading save",e),ni.value=!0;const{layers:t,removeLayer:n,addLayer:r}=await et(()=>Promise.resolve().then(function(){return Ka}),void 0),{fixOldSave:i,getInitialLayers:s}=await et(()=>Promise.resolve().then(function(){return _l}),void 0);for(const d in t){const l=t[d];l&&n(l)}s(e).forEach(d=>r(d,e)),e=sn(e),e.offlineProd&&e.time!=null&&e.time&&e.devSpeed!==0&&(e.offlineTime==null&&(e.offlineTime=0),e.offlineTime+=Math.min(e.offlineTime+(Date.now()-e.time)/1e3,R.offlineLimit*3600)),e.time=Date.now(),e.modVersion!==R.versionNumber&&(i(e.modVersion,e),e.modVersion=R.versionNumber),Object.assign(D,e),X.active=D.id,pe.emit("onLoad")}setInterval(()=>{D.autosave&&de()},1e3);window.onbeforeunload=()=>{D.autosave&&de()};window.save=de;const ri=window.hardReset=async()=>{await Ve(Ue())};window.deleteLowerSaves=()=>{const e=Object.values(X.saves).indexOf(D.id)+1;Object.values(X.saves).slice(e).forEach(t=>localStorage.removeItem(t)),X.saves=X.saves.slice(0,e)};const it=Je({active:"",saves:[],showTPS:!0,theme:Vt.Nordic,unthrottled:!1,alignUnits:!1});Me(it,e=>{const t=_e.compressToUTF16(JSON.stringify(e));localStorage.setItem(R.id,t)},{deep:!0});var X=window.settings=it;window.hardResetSettings=()=>{const e={active:"",saves:[],showTPS:!0,theme:Vt.Nordic,alignUnits:!1};pe.emit("loadSettings",e),Object.assign(it,e),ri()};function ii(){try{let e=localStorage.getItem(R.id);if(e!=null&&e!==""){if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=_e.decompressFromUTF16(e);else{console.warn("Unable to determine settings encoding",e);return}const t=JSON.parse(e);typeof t=="object"&&Object.assign(it,t)}pe.emit("loadSettings",it)}catch{}}const ai=Je([]),si=Je([]),oi=Je([]);function be(e,t="span"){return typeof e=="function"?z({render:e}):typeof e=="string"?e.length>0?(e=e.trim(),e.charAt(0)!=="<"&&(e=`<${t}>${e}</${t}>`),z({template:e})):z({render:()=>({})}):e}function Be(e){if(Xe(e))return typeof e=="function"?e():be(e);const t=e[He];return w(t,e[at](),null)}function li(e){if(Xe(e))return typeof e=="function"?e():typeof e=="string"?w(re,null,[e]):w(e,null,null);const t=e[He];return w(t,e[at](),null)}function Xe(e){return typeof e=="string"?!0:typeof e=="object"?e==null?!1:"render"in e||"component"in e:typeof e=="function"&&e[nt]===!0}function Ot(e,t="div"){const n=Ae();return kt(()=>{n.value=be(le(e),t)}),n}function st(e,t="div"){const n=Ae(null);return kt(()=>{const r=le(e);n.value=r==""||r==null?null:be(r,t)}),n}function le(e){return c(c(e))}function O(...e){return e.includes(Object)||e.push(Object),e}const ui=z({__name:"Context",emits:["updateNodes"],setup(e,{emit:t}){var b;const n=P({}),r=new ResizeObserver(l),i=P(null);ht(()=>{const v=i.value;v!=null&&r.observe(v)});let s=!0,d=P((b=i.value)==null?void 0:b.getBoundingClientRect());function l(){s&&(s=!1,Ge(()=>{var v;d.value=(v=i.value)==null?void 0:v.getBoundingClientRect(),Object.values(n.value).filter(y=>y).forEach(y=>y.rect=y.element.getBoundingClientRect()),t("updateNodes",n.value),s=!0}))}pe.on("fontsLoaded",l);const o={attributes:!1,childList:!0,subtree:!1};lt(Lt,(v,y)=>{const S=new MutationObserver(()=>m(v));S.observe(y,o),n.value[v]={element:y,observer:S,rect:y.getBoundingClientRect()},l()}),lt(Dt,v=>{var y;(y=n.value[v])==null||y.observer.disconnect(),n.value[v]=void 0,l()}),lt(un,n),lt(cn,d);function m(v){const y=n.value[v];y!=null&&(y.rect=y.element.getBoundingClientRect(),t("updateNodes",n.value))}return(v,y)=>(p(),N(re,null,[Ie(v.$slots,"default",{},void 0,!0),f("div",{ref_key:"resizeListener",ref:i,class:"resize-listener"},null,512)],64))}});var on=W(ui,[["__scopeId","data-v-2b1dc1bc"]]);const ci=["onPointerdown"],di={class:"modal-wrapper"},gi={class:"modal-container"},fi={class:"modal-header"},mi={class:"modal-body"},hi={class:"modal-footer"},pi=f("div",{class:"modal-default-flex-grow"},null,-1),Re=z({__name:"Modal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const i=ge(e),s=$(()=>c(i.modelValue)||l.value);function d(){n("update:modelValue",!1)}const l=P(!1),o=P(null),m=$(()=>{var b,v;return(v=(b=o.value)==null?void 0:b.nodes)!=null?v:null});return t({isOpen:s,nodes:m}),(b,v)=>(p(),q(Cn,{to:"#modal-root"},[w(Kt,{name:"modal",onBeforeEnter:v[0]||(v[0]=y=>l.value=!0),onAfterLeave:v[1]||(v[1]=y=>l.value=!1)},{default:T(()=>[Mt(f("div",De({class:"modal-mask",onPointerdown:Qe(d,["self"])},b.$attrs),[f("div",di,[f("div",gi,[f("div",fi,[Ie(b.$slots,"header",{shown:c(s)},()=>[V(" default header ")])]),f("div",mi,[w(on,{ref_key:"contextRef",ref:o},{default:T(()=>[Ie(b.$slots,"body",{shown:c(s)},()=>[V(" default body ")])]),_:3},512)]),f("div",hi,[Ie(b.$slots,"footer",{shown:c(s)},()=>[f("div",{class:"modal-default-footer"},[pi,f("button",{class:"button modal-default-button",onClick:d}," Close ")])])])])])],16,ci),[[Sn,e.modelValue]])]),_:3})]))}}),Ce=Symbol("ProxyState");function bt(e,t={}){const n=t;let r=!1,i=!1;function s(){return r||(i&&console.error("Cyclical dependency detected. Cannot evaluate lazy proxy."),i=!0,Object.assign(n,e.call(n,n)),r=!0),n}return new Proxy(n,{get(d,l){if(l===Ce)return s();const o=s()[l];return o!=null&&typeof o=="object"&&we in o?o[we]:o},set(d,l,o){return s()[l]=o,!0},has(d,l){return l===Ce?!0:Reflect.has(s(),l)},ownKeys(){return Reflect.ownKeys(s())},getOwnPropertyDescriptor(d,l){return r||(Object.assign(n,e.call(n,n)),r=!0),Object.getOwnPropertyDescriptor(d,l)}})}const ln=u.ln(10);function ct(e){return e}function Ke(e,...t){const n=t.find(r=>_(r));return n==null?(console.error("Could not invert due to no input being a variable"),0):n.invert(e)}function vi(e,t){return _(t)?t.invert(u.neg(e)):(console.error("Could not invert due to no input being a variable"),0)}function bi(e,t){return _(t)?t.isIntegrable()?a.neg(t.getIntegralFormula(e)):(console.error("Could not integrate due to variable not being integrable"),a.constant(0)):(console.error("Could not integrate due to no input being a variable"),a.constant(0))}function yi(e){return a.neg(e)}function _i(e,t,n){return _(t)?t.invert(u.sub(e,K(n))):_(n)?n.invert(u.sub(e,K(t))):(console.error("Could not invert due to no input being a variable"),0)}function wi(e,t,n){var r,i;if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const s=t.getIntegralFormula(e);return a.times(n,(r=t.innermostVariable)!=null?r:0).add(s)}else if(_(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const s=n.getIntegralFormula(e);return a.times(t,(i=n.innermostVariable)!=null?i:0).add(s)}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function Ni(e,t,n){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const r=t.getIntegralFormula(e);return a.add(r,n)}else if(_(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const r=n.getIntegralFormula(e);return a.add(r,t)}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function Si(e,t,n){return _(t)?t.invert(u.add(e,K(n))):_(n)?n.invert(u.sub(K(t),e)):(console.error("Could not invert due to no input being a variable"),0)}function Ci(e,t,n){var r,i;if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const s=t.getIntegralFormula(e);return a.sub(s,a.times(n,(r=t.innermostVariable)!=null?r:0))}else if(_(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const s=n.getIntegralFormula(e);return a.times(t,(i=n.innermostVariable)!=null?i:0).sub(s)}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function Ii(e,t,n){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const r=t.getIntegralFormula(e);return a.sub(r,n)}else if(_(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const r=n.getIntegralFormula(e);return a.sub(r,t)}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function ki(e,t,n){return _(t)?t.invert(u.div(e,K(n))):_(n)?n.invert(u.div(e,K(t))):(console.error("Could not invert due to no input being a variable"),0)}function Mi(e,t,n){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const r=t.getIntegralFormula(e);return a.times(r,n)}else if(_(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const r=n.getIntegralFormula(e);return a.times(r,t)}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function $i(e,t,n){return _(t)?a.div(e,n):_(n)?a.div(e,t):(console.error("Could not apply substitution due to no input being a variable"),a.constant(0))}function xi(e,t,n){return _(t)?t.invert(u.mul(e,K(n))):_(n)?n.invert(u.div(K(t),e)):(console.error("Could not invert due to no input being a variable"),0)}function Fi(e,t,n){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const r=t.getIntegralFormula(e);return a.div(r,n)}else if(_(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const r=n.getIntegralFormula(e);return a.div(t,r)}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function Ti(e,t,n){return _(t)?a.mul(e,n):_(n)?a.mul(e,t):(console.error("Could not apply substitution due to no input being a variable"),a.constant(0))}function Pi(e,t){return _(t)?t.invert(u.recip(e)):(console.error("Could not invert due to no input being a variable"),0)}function Ei(e,t){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const n=t.getIntegralFormula(e);return a.ln(n)}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function Vi(e,t){return _(t)?t.invert(u.pow10(e)):(console.error("Could not invert due to no input being a variable"),0)}function Oi(e){return u.ln(e).sub(1).times(e).div(ln)}function Li(e,t){if(_(t)){const n=ln.times(e);return t.invert(n.div(n.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Di(e,t){return _(t)?t.isIntegrable()?new a({inputs:[t.getIntegralFormula(e)],evaluate:Oi,invert:Li}):(console.error("Could not integrate due to variable not being integrable"),a.constant(0)):(console.error("Could not integrate due to no input being a variable"),a.constant(0))}function qi(e,t,n){return _(t)?t.invert(u.pow(K(n),e)):_(n)?n.invert(u.root(K(t),e)):(console.error("Could not invert due to no input being a variable"),0)}function Bi(e,t){return u.ln(e).sub(1).times(e).div(u.ln(t))}function Ai(e,t,n){if(_(t)){const r=u.ln(K(n)).times(e);return t.invert(r.div(r.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Ri(e,t,n){return _(t)?t.isIntegrable()?new a({inputs:[t.getIntegralFormula(e),n],evaluate:Bi,invert:Ai}):(console.error("Could not integrate due to variable not being integrable"),a.constant(0)):(console.error("Could not integrate due to no input being a variable"),a.constant(0))}function zi(e,t){return _(t)?t.invert(u.pow(2,e)):(console.error("Could not invert due to no input being a variable"),0)}function Ui(e){return u.ln(e).sub(1).times(e).div(u.ln(2))}function ji(e,t){if(_(t)){const n=u.ln(2).times(e);return t.invert(n.div(n.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Gi(e,t){return _(t)?t.isIntegrable()?new a({inputs:[t.getIntegralFormula(e)],evaluate:Ui,invert:ji}):(console.error("Could not integrate due to variable not being integrable"),a.constant(0)):(console.error("Could not integrate due to no input being a variable"),a.constant(0))}function Wi(e,t){return _(t)?t.invert(u.exp(e)):(console.error("Could not invert due to no input being a variable"),0)}function Hi(e){return u.ln(e).sub(1).times(e)}function Ji(e,t){return _(t)?t.invert(u.div(e,u.div(e,Math.E).lambertw())):(console.error("Could not invert due to no input being a variable"),0)}function Zi(e,t){return _(t)?t.isIntegrable()?new a({inputs:[t.getIntegralFormula(e)],evaluate:Hi,invert:Ji}):(console.error("Could not integrate due to variable not being integrable"),a.constant(0)):(console.error("Could not integrate due to no input being a variable"),a.constant(0))}function Ki(e,t,n){return _(t)?t.invert(u.root(e,K(n))):_(n)?n.invert(u.ln(e).div(u.ln(K(t)))):(console.error("Could not invert due to no input being a variable"),0)}function Yi(e,t,n){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const r=t.getIntegralFormula(e),i=a.add(n,1);return a.pow(r,i).div(i)}else if(_(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const r=n.getIntegralFormula(e);return a.pow(t,r).div(a.ln(t))}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function Xi(e,t){return _(t)?t.invert(u.root(e,10)):(console.error("Could not invert due to no input being a variable"),0)}function Qi(e,t){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const n=t.getIntegralFormula(e);return a.pow10(n).div(a.ln(10))}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function ea(e,t,n){return _(t)?t.invert(u.ln(e).div(u.ln(K(n)))):_(n)?n.invert(u.root(K(t),e)):(console.error("Could not invert due to no input being a variable"),0)}function ta(e,t,n){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const r=t.getIntegralFormula(e);return a.pow(n,r).div(a.ln(n))}else if(_(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const r=n.getIntegralFormula(e),i=a.add(t,1);return a.pow(r,i).div(i)}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function na(e,t,n){return _(t)?t.invert(u.root(e,u.recip(K(n)))):_(n)?n.invert(u.ln(K(t)).div(u.ln(e))):(console.error("Could not invert due to no input being a variable"),0)}function ra(e,t,n){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const r=t.getIntegralFormula(e);return a.pow(r,a.recip(n).add(1)).times(n).div(a.add(n,1))}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function ia(e,t){return _(t)?t.invert(u.ln(e)):(console.error("Could not invert due to no input being a variable"),0)}function aa(e,t){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const n=t.getIntegralFormula(e);return a.exp(n)}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function sa(e,t=2,n=u.fromComponents_noNormalize(1,0,1)){const r=u.minabs(t,1e308).toNumber();return u.tetrate(e,r,n)}function oa(e,t,n,r){return _(t)?t.invert(u.ssqrt(e)):(console.error("Could not invert due to no input being a variable"),0)}function la(e,t=2,n=u.fromComponents_noNormalize(1,0,1)){const r=u.minabs(t,1e308).toNumber();return u.iteratedexp(e,r,new u(n))}function ua(e,t,n,r){return _(t)?t.invert(u.iteratedlog(e,Math.E,u.minabs(1e308,K(n)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function ca(e,t=10,n=2){const r=u.minabs(n,1e308).toNumber();return u.iteratedlog(e,t,r)}function da(e,t=10){const n=u.minabs(t,1e308).toNumber();return u.slog(e,n)}function ga(e,t,n){return _(t)?t.invert(u.tetrate(e,u.minabs(1e308,K(n)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function fa(e,t,n){const r=u.minabs(t,1e308).toNumber();return u.layeradd(e,r,n)}function ma(e,t,n,r){return _(t)?t.invert(u.layeradd(e,u.minabs(1e308,K(n)).negate().toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function ha(e,t){return _(t)?t.invert(u.pow(Math.E,e).times(e)):(console.error("Could not invert due to no input being a variable"),0)}function pa(e,t){return _(t)?t.invert(u.tetrate(e,2)):(console.error("Could not invert due to no input being a variable"),0)}function va(e,t,n){const r=u.minabs(t,1e308).toNumber();return u.pentate(e,r,n)}function ba(e,t){return _(t)?t.invert(u.asin(e)):(console.error("Could not invert due to no input being a variable"),0)}function ya(e,t){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const n=t.getIntegralFormula(e);return a.cos(n).neg()}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function _a(e,t){return _(t)?t.invert(u.acos(e)):(console.error("Could not invert due to no input being a variable"),0)}function wa(e,t){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const n=t.getIntegralFormula(e);return a.sin(n)}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function Na(e,t){return _(t)?t.invert(u.atan(e)):(console.error("Could not invert due to no input being a variable"),0)}function Sa(e,t){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const n=t.getIntegralFormula(e);return a.cos(n).ln().neg()}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function Ca(e,t){return _(t)?t.invert(u.sin(e)):(console.error("Could not invert due to no input being a variable"),0)}function Ia(e,t){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const n=t.getIntegralFormula(e);return a.asin(n).times(n).add(a.sqrt(a.sub(1,a.pow(n,2))))}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function ka(e,t){return _(t)?t.invert(u.cos(e)):(console.error("Could not invert due to no input being a variable"),0)}function Ma(e,t){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const n=t.getIntegralFormula(e);return a.acos(n).times(n).sub(a.sqrt(a.sub(1,a.pow(n,2))))}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function $a(e,t){return _(t)?t.invert(u.tan(e)):(console.error("Could not invert due to no input being a variable"),0)}function xa(e,t){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const n=t.getIntegralFormula(e);return a.atan(n).times(n).sub(a.ln(a.pow(n,2).add(1)).div(2))}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function Fa(e,t){return _(t)?t.invert(u.asinh(e)):(console.error("Could not invert due to no input being a variable"),0)}function Ta(e,t){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const n=t.getIntegralFormula(e);return a.cosh(n)}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function Pa(e,t){return _(t)?t.invert(u.acosh(e)):(console.error("Could not invert due to no input being a variable"),0)}function Ea(e,t){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const n=t.getIntegralFormula(e);return a.sinh(n)}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function Va(e,t){return _(t)?t.invert(u.atanh(e)):(console.error("Could not invert due to no input being a variable"),0)}function Oa(e,t){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const n=t.getIntegralFormula(e);return a.cosh(n).ln()}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function La(e,t){return _(t)?t.invert(u.sinh(e)):(console.error("Could not invert due to no input being a variable"),0)}function Da(e,t){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const n=t.getIntegralFormula(e);return a.asinh(n).times(n).sub(a.pow(n,2).add(1).sqrt())}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function qa(e,t){return _(t)?t.invert(u.cosh(e)):(console.error("Could not invert due to no input being a variable"),0)}function Ba(e,t){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const n=t.getIntegralFormula(e);return a.acosh(n).times(n).sub(a.add(n,1).sqrt().times(a.sub(n,1).sqrt()))}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function Aa(e,t){return _(t)?t.invert(u.tanh(e)):(console.error("Could not invert due to no input being a variable"),0)}function Ra(e,t){if(_(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),a.constant(0);const n=t.getIntegralFormula(e);return a.atanh(n).times(n).add(a.sub(1,a.pow(n,2)).ln().div(2))}return console.error("Could not integrate due to no input being a variable"),a.constant(0)}function Ze(e){return(t,n)=>new a({inputs:[t,n],evaluate:e,invert:ct})}function _(e){return e instanceof J&&e.hasVariable()}function K(e,t){return e instanceof J?e.evaluate(t):c(e)}function za(){return a.pow(this,2).div(2)}function Ua(){return this}const Y=class{constructor(e){this.negate=this.neg,this.negated=this.neg,this.sgn=this.sign,this.plus=this.add,this.subtract=this.sub,this.minus=this.sub,this.multiply=this.mul,this.times=this.mul,this.divide=this.div,this.divideBy=this.div,this.dividedBy=this.div,this.reciprocal=this.recip,this.reciprocate=this.recip,this.logarithm=this.log;let t;"inputs"in e&&(e.inputs=e.inputs.map(n=>typeof n=="object"&&we in n?n[we]:n)),"variable"in e?(typeof e.variable=="object"&&we in e.variable&&(e.variable=e.variable[we]),t=this.setupVariable(e)):"evaluate"in e?t=this.setupFormula(e):t=this.setupConstant(e),this.inputs=t.inputs,this.internalVariables=t.internalVariables,this.innermostVariable=t.innermostVariable,this.internalEvaluate=t.internalEvaluate,this.internalInvert=t.internalInvert,this.internalIntegrate=t.internalIntegrate,this.internalIntegrateInner=t.internalIntegrateInner,this.applySubstitution=t.applySubstitution}setupVariable({variable:e}){return{inputs:[e],internalVariables:1,innermostVariable:e,internalIntegrate:za,internalIntegrateInner:Ua,applySubstitution:ct}}setupConstant({inputs:e}){return e.length!==1&&console.error("Evaluate function is required if inputs is not length 1"),{inputs:e,internalVariables:0}}setupFormula(e){var y,S;const{inputs:t,evaluate:n,invert:r,integrate:i,integrateInner:s,applySubstitution:d}=e,l=t.reduce((I,C)=>I+(C instanceof Y?C.internalVariables:0),0),o=t.find(I=>I instanceof Y&&I.hasVariable()),m=l===1?o==null?void 0:o.innermostVariable:void 0,b=(y=o==null?void 0:o.isInvertible())!=null?y:!1,v=(S=o==null?void 0:o.isIntegrable())!=null?S:!1;return{inputs:t,internalEvaluate:n,internalInvert:b?r:void 0,internalIntegrate:v?i:void 0,internalIntegrateInner:s,applySubstitution:d,innermostVariable:m,internalVariables:l}}isInvertible(){return this.hasVariable()&&(this.internalInvert!=null||this.internalEvaluate==null)}isIntegrable(){return this.hasVariable()&&this.internalIntegrate!=null}isIntegralInvertible(){return this.isIntegrable()?this.getIntegralFormula().isInvertible():!1}hasVariable(){return this.internalVariables===1}evaluate(e){var t,n,r;return(r=(n=(t=this.internalEvaluate)==null?void 0:t.call(this,...this.inputs.map(i=>K(i,e))))!=null?n:this.hasVariable()?e:null)!=null?r:K(this.inputs[0])}equals(e){return this.inputs.length===e.inputs.length&&this.inputs.every((t,n)=>t instanceof Y&&e.inputs[n]instanceof Y?t.equals(e.inputs[n]):!(t instanceof Y)&&!(e.inputs[n]instanceof Y)&&u.eq(c(t),c(e.inputs[n])))&&this.internalEvaluate===e.internalEvaluate&&this.internalInvert===e.internalInvert&&this.internalIntegrate===e.internalIntegrate&&this.internalVariables===e.internalVariables}static constant(e){return new a({inputs:[e]})}static variable(e){return new a({variable:e})}static step(e,t,n){const r=n(a.variable(0)),i=Jt(t);function s(l){return u.lt(l,c(i))?l:u.add(r.evaluate(u.sub(l,c(i))),c(i))}function d(l,o){return _(o)&&r.isInvertible()?(u.gt(l,c(i))&&(l=u.add(r.invert(u.sub(l,c(i))),c(i))),o.invert(l)):(console.error("Could not invert due to no input being a variable"),0)}return new a({inputs:[e],evaluate:s,invert:r.isInvertible()&&r.hasVariable()?d:void 0})}static if(e,t,n,r){const i=P(0),s=a.variable(i),d=n(s),l=r==null?void 0:r(s),o=Jt(t);function m(v){return c(o)?(i.value=v,d.evaluate()):l?(i.value=v,l.evaluate()):v}function b(v,y){return!_(y)||!d.isInvertible()||l!=null&&!l.isInvertible()?(console.error("Could not invert due to no input being a variable"),0):c(o)?y.invert(d.invert(v)):l?y.invert(l.invert(v)):y.invert(v)}return new a({inputs:[e],evaluate:m,invert:d.isInvertible()&&d.hasVariable()?b:void 0})}static conditional(e,t,n,r){return a.if(e,t,n,r)}static abs(e){return new a({inputs:[e],evaluate:u.abs})}static neg(e){return new a({inputs:[e],evaluate:u.neg,invert:vi,applySubstitution:yi,integrate:bi})}static sign(e){return new a({inputs:[e],evaluate:u.sign})}static round(e){return new a({inputs:[e],evaluate:u.round,invert:Ke})}static floor(e){return new a({inputs:[e],evaluate:u.floor,invert:Ke})}static ceil(e){return new a({inputs:[e],evaluate:u.ceil,invert:Ke})}static trunc(e){return new a({inputs:[e],evaluate:u.trunc,invert:Ke})}static add(e,t){return new a({inputs:[e,t],evaluate:u.add,invert:_i,integrate:wi,integrateInner:Ni,applySubstitution:ct})}static sub(e,t){return new a({inputs:[e,t],evaluate:u.sub,invert:Si,integrate:Ci,integrateInner:Ii,applySubstitution:ct})}static mul(e,t){return new a({inputs:[e,t],evaluate:u.mul,invert:ki,integrate:Mi,applySubstitution:$i})}static div(e,t){return new a({inputs:[e,t],evaluate:u.div,invert:xi,integrate:Fi,applySubstitution:Ti})}static recip(e){return new a({inputs:[e],evaluate:u.recip,invert:Pi,integrate:Ei})}static clamp(e,t,n){return new a({inputs:[e,t,n],evaluate:u.clamp,invert:Ke})}static pLog10(e){return new a({inputs:[e],evaluate:u.pLog10})}static absLog10(e){return new a({inputs:[e],evaluate:u.absLog10})}static log10(e){return new a({inputs:[e],evaluate:u.log10,invert:Vi,integrate:Di})}static log(e,t){return new a({inputs:[e,t],evaluate:u.log,invert:qi,integrate:Ri})}static log2(e){return new a({inputs:[e],evaluate:u.log2,invert:zi,integrate:Gi})}static ln(e){return new a({inputs:[e],evaluate:u.ln,invert:Wi,integrate:Zi})}static pow(e,t){return new a({inputs:[e,t],evaluate:u.pow,invert:Ki,integrate:Yi})}static pow10(e){return new a({inputs:[e],evaluate:u.pow10,invert:Xi,integrate:Qi})}static pow_base(e,t){return new a({inputs:[e,t],evaluate:u.pow_base,invert:ea,integrate:ta})}static root(e,t){return new a({inputs:[e,t],evaluate:u.root,invert:na,integrate:ra})}static factorial(e){return new a({inputs:[e],evaluate:u.factorial})}static gamma(e){return new a({inputs:[e],evaluate:u.gamma})}static lngamma(e){return new a({inputs:[e],evaluate:u.lngamma})}static exp(e){return new a({inputs:[e],evaluate:u.exp,invert:ia,integrate:aa})}static sqr(e){return a.pow(e,2)}static sqrt(e){return a.root(e,2)}static cube(e){return a.pow(e,3)}static cbrt(e){return a.root(e,3)}static tetrate(e,t=2,n=u.fromComponents_noNormalize(1,0,1)){return new a({inputs:[e,t,n],evaluate:sa,invert:oa})}static iteratedexp(e,t=2,n=u.fromComponents_noNormalize(1,0,1)){return new a({inputs:[e,t,n],evaluate:la,invert:ua})}static iteratedlog(e,t=10,n=1){return new a({inputs:[e,t,n],evaluate:ca})}static slog(e,t=10){return new a({inputs:[e,t],evaluate:da,invert:ga})}static layeradd10(e,t){return new a({inputs:[e,t],evaluate:u.layeradd10})}static layeradd(e,t,n=10){return new a({inputs:[e,t,n],evaluate:fa,invert:ma})}static lambertw(e){return new a({inputs:[e],evaluate:u.lambertw,invert:ha})}static ssqrt(e){return new a({inputs:[e],evaluate:u.ssqrt,invert:pa})}static pentate(e,t=2,n=u.fromComponents_noNormalize(1,0,1)){return new a({inputs:[e,t,n],evaluate:va})}static sin(e){return new a({inputs:[e],evaluate:u.sin,invert:Ca,integrate:ya})}static cos(e){return new a({inputs:[e],evaluate:u.cos,invert:ka,integrate:wa})}static tan(e){return new a({inputs:[e],evaluate:u.tan,invert:$a,integrate:Sa})}static asin(e){return new a({inputs:[e],evaluate:u.asin,invert:ba,integrate:Ia})}static acos(e){return new a({inputs:[e],evaluate:u.acos,invert:_a,integrate:Ma})}static atan(e){return new a({inputs:[e],evaluate:u.atan,invert:Na,integrate:xa})}static sinh(e){return new a({inputs:[e],evaluate:u.sinh,invert:La,integrate:Ta})}static cosh(e){return new a({inputs:[e],evaluate:u.cosh,invert:qa,integrate:Ea})}static tanh(e){return new a({inputs:[e],evaluate:u.tanh,invert:Aa,integrate:Oa})}static asinh(e){return new a({inputs:[e],evaluate:u.asinh,invert:Fa,integrate:Da})}static acosh(e){return new a({inputs:[e],evaluate:u.acosh,invert:Pa,integrate:Ba})}static atanh(e){return new a({inputs:[e],evaluate:u.atanh,invert:Va,integrate:Ra})}step(e,t){return a.step(this,e,t)}if(e,t){return a.if(this,e,t)}conditional(e,t){return a.if(this,e,t)}abs(){return a.abs(this)}neg(){return a.neg(this)}sign(){return a.sign(this)}round(){return a.round(this)}floor(){return a.floor(this)}ceil(){return a.ceil(this)}trunc(){return a.trunc(this)}add(e){return a.add(this,e)}sub(e){return a.sub(this,e)}mul(e){return a.mul(this,e)}div(e){return a.div(this,e)}recip(){return a.recip(this)}max(e){return a.max(this,e)}min(e){return a.min(this,e)}maxabs(e){return a.maxabs(this,e)}minabs(e){return a.minabs(this,e)}clamp(e,t){return a.clamp(this,e,t)}clampMin(e){return a.clampMin(this,e)}clampMax(e){return a.clampMax(this,e)}pLog10(){return a.pLog10(this)}absLog10(){return a.absLog10(this)}log10(){return a.log10(this)}log(e){return a.log(this,e)}log2(){return a.log2(this)}ln(){return a.ln(this)}pow(e){return a.pow(this,e)}pow10(){return a.pow10(this)}pow_base(e){return a.pow_base(this,e)}root(e){return a.root(this,e)}factorial(){return a.factorial(this)}gamma(){return a.gamma(this)}lngamma(){return a.lngamma(this)}exp(){return a.exp(this)}sqr(){return a.pow(this,2)}sqrt(){return a.root(this,2)}cube(){return a.pow(this,3)}cbrt(){return a.root(this,3)}tetrate(e=2,t=u.fromComponents_noNormalize(1,0,1)){return a.tetrate(this,e,t)}iteratedexp(e=2,t=u.fromComponents_noNormalize(1,0,1)){return a.iteratedexp(this,e,t)}iteratedlog(e=10,t=1){return a.iteratedlog(this,e,t)}slog(e=10){return a.slog(this,e)}layeradd10(e){return a.layeradd10(this,e)}layeradd(e,t){return a.layeradd(this,e,t)}lambertw(){return a.lambertw(this)}ssqrt(){return a.ssqrt(this)}pentate(e=2,t=u.fromComponents_noNormalize(1,0,1)){return a.pentate(this,e,t)}sin(){return a.sin(this)}cos(){return a.cos(this)}tan(){return a.tan(this)}asin(){return a.asin(this)}acos(){return a.acos(this)}atan(){return a.atan(this)}sinh(){return a.sinh(this)}cosh(){return a.cosh(this)}tanh(){return a.tanh(this)}asinh(){return a.asinh(this)}acosh(){return a.acosh(this)}atanh(){return a.atanh(this)}};let J=Y;J.negate=Y.neg;J.negated=Y.neg;J.sgn=Y.sign;J.plus=Y.add;J.subtract=Y.sub;J.minus=Y.sub;J.multiply=Y.mul;J.times=Y.mul;J.divide=Y.div;J.divideBy=Y.div;J.dividedBy=Y.div;J.reciprocal=Y.recip;J.reciprocate=Y.recip;J.max=Ze(u.max);J.min=Ze(u.min);J.minabs=Ze(u.minabs);J.maxabs=Ze(u.maxabs);J.clampMin=Ze(u.clampMin);J.clampMax=Ze(u.clampMax);J.logarithm=Y.log;class a extends J{invert(t){return this.internalInvert&&this.hasVariable()?this.internalInvert.call(this,t,...this.inputs):this.inputs.length===1&&this.hasVariable()?t:(console.error("Cannot invert non-invertible formula"),0)}evaluateIntegral(t){return this.isIntegrable()?this.getIntegralFormula().evaluate(t):(console.error("Cannot evaluate integral of formula without integral"),0)}invertIntegral(t){return!this.isIntegrable()||!this.getIntegralFormula().isInvertible()?(console.error("Cannot invert integral of formula without invertible integral"),0):this.getIntegralFormula().invert(t)}calculateConstantOfIntegration(){const t=this.getIntegralFormula().evaluate(1),n=u.add(this.evaluate(0),this.evaluate(1)).div(2);return u.sub(n,t)}getIntegralFormula(t){if(this.integralFormula!=null&&t==null)return this.integralFormula;if(t==null){if(this.applySubstitution==null){if(t=[],this.internalIntegrate==null)return console.error("Cannot integrate formula with non-integrable operation"),a.constant(0);let n=this.internalIntegrate.call(this,t,...this.inputs);t.forEach(r=>n=r(n)),this.integralFormula=n}else if(this.internalIntegrate)this.integralFormula=this.internalIntegrate.call(this,void 0,...this.inputs);else if(this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable())this.integralFormula=this;else return console.error("Cannot integrate formula without variable"),a.constant(0);return this.integralFormula}else return this.applySubstitution==null?(console.error("Cannot have two complex operations in an integrable formula"),a.constant(0)):(t.push(n=>this.applySubstitution.call(this,n,...this.inputs)),this.internalIntegrateInner?this.internalIntegrateInner.call(this,t,...this.inputs):this.internalIntegrate?this.internalIntegrate.call(this,t,...this.inputs):this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable()?this:(console.error("Cannot integrate formula without variable"),a.constant(0)))}}const ke=Symbol("PersistentState"),gt=Symbol("DefaultValue"),ft=Symbol("StackTrace"),St=Symbol("Deleted"),we=Symbol("NonPersistent"),Oe=Symbol("SaveDataPath"),Ct=Symbol("SkipPersistence");function ja(){var e,t;return(t=(e=new Error().stack)==null?void 0:e.split(`
`).slice(3,5).map(n=>n.trim()).join(`
`))!=null?t:""}function Zt(e,t){var n;u.isNaN(t)&&(Z.hasNaN||(D.autosave=!1,Z.hasNaN=!0,Z.NaNPath=e[Oe],Z.NaNPersistent=e),console.error(`Attempted to save NaN value to ${(n=e[Oe])==null?void 0:n.join(".")}`)),e[ke].value=t}function mt(e,t=!0){const n=ae(e)?e:P(e);ae(e)&&(e=e.value);const r=$({get(){return n.value},set(s){t?Zt(i,s):i[ke].value=s}});r[gt]=e;const i={get value(){return n.value},set value(s){t?Zt(i,s):i[ke].value=s},__v_isRef:!0,[ke]:n,[gt]:e,[ft]:ja(),[St]:!1,[we]:r,[Oe]:void 0};return ve.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",i,`
Created at:
`+i[ft]):je[ve[ve.length-1]].add(i),i}function Ga(e){return e!=null&&typeof e=="object"&&ke in e}function Wa(e){return!(Ce in e)&&we in e?e[we]:new Proxy(e,{get(t,n){if(n!==ke)return n===Ct?!0:t[n]},set(t,n,r){return t[n]=r,!0},has(t,n){return n===ke?!1:n==Ct?!0:Reflect.has(t,n)}})}pe.on("addLayer",(e,t)=>{const n=[],r=(i,s=[])=>{let d=!1;return Object.keys(i).forEach(l=>{let o=i[l];if(o!=null&&typeof o=="object"){if(o[Ct]===!0)return;if(Ce in o&&(o=o[Ce]),Ga(o)){if(d=!0,o[St]){console.warn("Deleted persistent ref present in returned object. Ignoring...",o,`
Created at:
`+o[ft]);return}je[e.id].delete(o);const m=[e.id,...s,l];o[Oe]!=null&&JSON.stringify(m)!==JSON.stringify(o[Oe])&&console.error(`Persistent ref is being saved to \`${m.join(".")}\` when it's already present at \`${o[Oe].join(".")}\`.`,"This can cause unexpected behavior when loading saves between updates."),o[Oe]=m;const b=s.reduce((y,S)=>(S in y||(y[S]={}),y[S]),t),v=b[l];b[l]=o[ke],In(b)?v!=null?b[l]=v:b[l]=o[gt]:v!=null?b[l].value=v:b[l].value=o[gt]}else!(o instanceof u)&&!(o instanceof a)&&!ae(o)&&!n.includes(o)&&(typeof o.type=="symbol"&&n.push(o),r(o,[...s,l])&&(Rt(o)&&!Rt(i)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",Ce in i?i[Ce]:i,l):d=!0))}}),d};r(e[Ce]),je[e.id].forEach(i=>{i[St]||console.error(`Created persistent ref in ${e.id} without registering it to the layer!`,`Make sure to include everything persistent in the returned object.

Created at:
`+i[ft])}),je[e.id].clear()});const Lt=Symbol("RegisterNode"),Dt=Symbol("UnregisterNode"),un=Symbol("Nodes"),cn=Symbol("Bounds"),oe=It({});window.layers=oe;const je={},ve=[];function qt(e,t){return bt(()=>{const n={},r=n.emitter=Yt();if(n.on=r.on.bind(r),n.emit=r.emit.bind(r),n.nodes=P({}),n.id=e,ve.push(e),je[e]=new Set,n.minimized=mt(!1,!1),Object.assign(n,t.call(n,n)),ve[ve.length-1]==null||ve[ve.length-1]!==e)throw new Error(`Adding layers stack in invalid state. This should not happen
Stack: ${ve}
Trying to pop ${n.id}`);ve.pop(),A(n,"color"),A(n,"display"),A(n,"classes"),A(n,"style"),A(n,"name"),Le(n,"name",n.id),A(n,"minWidth"),Le(n,"minWidth",600),A(n,"minimizable"),Le(n,"minimizable",!0),A(n,"minimizedDisplay");const i=n.style;return n.style=$(()=>{var d,l;let s=c(n.minWidth);return(typeof s=="number"||!Number.isNaN(parseInt(s)))&&(s=s+"px"),[(d=c(i))!=null?d:"",(l=n.minimized)!=null&&l.value?{flexGrow:"0",flexShrink:"0",width:"60px",minWidth:"",flexBasis:"",margin:"0"}:{flexGrow:"",flexShrink:"",width:"",minWidth:s,flexBasis:s,margin:""}]}),n})}function dn(e,t){if(console.info("Adding layer",e.id),oe[e.id]){console.error("Attempted to add layer with same ID as existing layer",e.id,oe[e.id]);return}Le(t,"layers",{}),t.layers[e.id]==null&&(t.layers[e.id]={}),oe[e.id]=e,pe.emit("addLayer",e,t.layers[e.id])}function Ha(e){return oe[e]}function gn(e){console.info("Removing layer",e.id),pe.emit("removeLayer",e),oe[e.id]=void 0}function Ja(e){gn(e),dn(e,D)}function Za(e){const t=P(!1);return{openModal:()=>t.value=!0,modal:ie(()=>w(Re,{modelValue:t.value,"onUpdate:modelValue":n=>t.value=n},{header:()=>w("h2",null,[c(e.name)]),body:c(e.display)}))}}pe.on("update",function(t){Object.values(oe).forEach(n=>{n==null||n.emit("preUpdate",t)}),Object.values(oe).forEach(n=>{n==null||n.emit("update",t)}),Object.values(oe).forEach(n=>{n==null||n.emit("postUpdate",t)})});var Ka=Object.freeze(Object.defineProperty({__proto__:null,RegisterNodeInjectionKey:Lt,UnregisterNodeInjectionKey:Dt,NodesInjectionKey:un,BoundsInjectionKey:cn,layers:oe,persistentRefs:je,addingLayers:ve,createLayer:qt,addLayer:dn,getLayer:Ha,removeLayer:gn,reloadLayer:Ja,setupLayerModal:Za},Symbol.toStringTag,{value:"Module"}));const Ya=z({components:{Context:on,ErrorVue:Xt},props:{index:{type:Number,required:!0},display:{type:O(Object,String,Function),required:!0},minimizedDisplay:O(Object,String,Function),minimized:{type:Object,required:!0},name:{type:O(String),required:!0},color:O(String),minimizable:O(Boolean),nodes:{type:Object,required:!0}},emits:["setMinimized"],setup(e){const{display:t,index:n,minimized:r,minimizedDisplay:i}=ge(e),s=Ot(t),d=st(i),l=$(()=>R.allowGoBack&&n.value>0&&!le(r));function o(){D.tabs.splice(c(e.index),1/0)}function m(v){e.nodes.value=v}const b=P([]);return kn((v,y,S)=>(console.warn(`Error caught in "${e.name}" layer`,v,y,S),b.value.push(v instanceof Error?v:new Error(JSON.stringify(v))),!1)),{component:s,minimizedComponent:d,showGoBack:l,updateNodes:m,unref:c,goBack:o,errors:b}}}),Xa={key:1};function Qa(e,t,n,r,i,s){const d=We("ErrorVue"),l=We("Context");return e.errors.length>0?(p(),q(d,{key:0,errors:e.errors},null,8,["errors"])):(p(),N("div",De({key:1,class:"layer-container",style:{"--layer-color":e.unref(e.color)}},e.$attrs),[e.showGoBack?(p(),N("button",{key:0,class:"goBack",onClick:t[0]||(t[0]=(...o)=>e.goBack&&e.goBack(...o))},"\u274C")):x("",!0),e.unref(e.minimized)?(p(),N("button",{key:1,class:"layer-tab minimized",onClick:t[1]||(t[1]=o=>e.$emit("setMinimized",!1))},[e.minimizedComponent?(p(),q(ue(e.minimizedComponent),{key:0})):(p(),N("div",Xa,L(e.unref(e.name)),1))])):(p(),N("div",{key:2,class:te(["layer-tab",{showGoBack:e.showGoBack}])},[w(l,{onUpdateNodes:e.updateNodes},{default:T(()=>[(p(),q(ue(e.component)))]),_:1},8,["onUpdateNodes"])],2)),e.unref(e.minimizable)?(p(),N("button",{key:3,class:"minimize",onClick:t[2]||(t[2]=o=>e.$emit("setMinimized",!0))}," \u25BC ")):x("",!0)],16))}var es=W(Ya,[["render",Qa],["__scopeId","data-v-a9f5b1da"]]);const fn=e=>(xe("data-v-4b4bda40"),e=e(),Fe(),e),ts=fn(()=>f("h2",null,"Changelog",-1)),ns=fn(()=>f("details",{open:""},[f("summary",null,[V("v0.0 Initial Commit - "),f("time",null,"2021-09-04")]),V(" This is the first release :D "),f("ul",null,[f("li",{class:"feature"},"Did everything"),f("li",{class:"fix"},"Had some fun"),f("li",{class:"breaking"},"Removed everything"),f("li",{class:"balancing"},"Created some bugs to fix later")])],-1)),rs=z({__name:"Changelog",setup(e,{expose:t}){const n=P(!1);return t({open(){n.value=!0}}),(r,i)=>(p(),q(Re,{modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=s=>n.value=s)},{header:T(()=>[ts]),body:T(()=>[ns]),_:1},8,["modelValue"]))}});var is=W(rs,[["__scopeId","data-v-4b4bda40"]]),as=z({props:{element:Object,display:{type:O(Object,String,Function),required:!0},style:O(Object,String,Array),classes:O(Object),direction:O(String),xoffset:O(String),yoffset:O(String),pinned:Object},setup(e){const{element:t,display:n,pinned:r}=ge(e),i=P(!1),s=$(()=>(le(r)||i.value)&&d.value),d=st(n),l=Ae(be(ie(()=>{const b=le(t);return b==null?"":li(b)})));function o(b){const v=r;b.shiftKey&&v&&(v.value=!v.value,b.stopPropagation(),b.preventDefault())}const m=$(()=>le(r)&&vt[X.theme].showPin);return{Direction:U,isHovered:i,isShown:s,comp:d,elementComp:l,unref:c,togglePinned:o,showPin:m}}});const ss={key:0,class:"material-icons pinned"};function os(e,t,n,r,i,s){return p(),N("div",{class:te(["tooltip-container",{shown:e.isShown}]),onMouseenter:t[0]||(t[0]=d=>e.isHovered=!0),onMouseleave:t[1]||(t[1]=d=>e.isHovered=!1),onClickCapture:t[2]||(t[2]=(...d)=>e.togglePinned&&e.togglePinned(...d))},[Ie(e.$slots,"default",{},void 0,!0),e.elementComp?(p(),q(ue(e.elementComp),{key:0})):x("",!0),w(Kt,{name:"fade"},{default:T(()=>{var d;return[e.isShown?(p(),N("div",{key:0,class:te(["tooltip",{top:e.unref(e.direction)===e.Direction.Up,left:e.unref(e.direction)===e.Direction.Left,right:e.unref(e.direction)===e.Direction.Right,bottom:e.unref(e.direction)===e.Direction.Down,...e.unref(e.classes)}]),style:se([{"--xoffset":e.unref(e.xoffset)||"0px","--yoffset":e.unref(e.yoffset)||"0px"},(d=e.unref(e.style))!=null?d:{}])},[e.showPin?(p(),N("span",ss,"push_pin")):x("",!0),e.comp?(p(),q(ue(e.comp),{key:1})):x("",!0)],6)):x("",!0)]}),_:1})],34)}var Q=W(as,[["render",os],["__scopeId","data-v-6102fa3a"]]);const ze=e=>(xe("data-v-10effbe8"),e=e(),Fe(),e),ls={class:"info-modal-header"},us=["src","alt"],cs={class:"info-modal-title"},ds={key:0},gs={key:0},fs={key:0},ms=ze(()=>f("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)),hs=ze(()=>f("br",null,null,-1)),ps=ze(()=>f("br",null,null,-1)),vs=["href"],bs=ze(()=>f("span",{class:"material-icons info-modal-discord"},"discord",-1)),ys=ze(()=>f("div",null,[f("a",{href:"https://discord.gg/yJ4fjnjU54",class:"info-modal-discord-link",target:"_blank"},[f("span",{class:"material-icons info-modal-discord"},"discord"),V(" Profectus & Friends ")])],-1)),_s=ze(()=>f("div",null,[f("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link",target:"_blank"},[f("span",{class:"material-icons info-modal-discord"},"discord"),V(" The Modding Tree ")])],-1)),ws=ze(()=>f("br",null,null,-1));var Ns=z({__name:"Info",props:{changelog:null},setup(e,{expose:t}){const n=e,{title:r,logo:i,author:s,discordName:d,discordLink:l,versionNumber:o,versionTitle:m}=R,b=ge(n),v=P(!1),y=$(()=>Tt(D.timePlayed)),S=$(()=>be(ie(()=>w(re,null,[si.map(Be)]))));t({open(){v.value=!0}});function I(){var C;(C=c(b.changelog))==null||C.open()}return(C,j)=>(p(),q(Re,{modelValue:v.value,"onUpdate:modelValue":j[0]||(j[0]=H=>v.value=H)},{header:T(()=>[f("div",ls,[c(i)?(p(),N("img",{key:0,class:"info-modal-logo",src:c(i),alt:c(r)},null,8,us)):x("",!0),f("div",cs,[f("h2",null,L(c(r)),1),f("h4",null,[V(" v"+L(c(o)),1),c(m)?(p(),N("span",ds,": "+L(c(m)),1)):x("",!0)])])])]),body:T(({shown:H})=>[H?(p(),N("div",gs,[c(s)?(p(),N("div",fs,"By "+L(c(s)),1)):x("",!0),ms,hs,f("div",{class:"link",onClick:I},"Changelog"),ps,f("div",null,[c(l)?(p(),N("a",{key:0,href:c(l),class:"info-modal-discord-link",target:"_blank"},[bs,V(" "+L(c(d)),1)],8,vs)):x("",!0)]),ys,_s,ws,f("div",null,"Time Played: "+L(c(y)),1),(p(),q(ue(c(S))))])):x("",!0)]),_:1},8,["modelValue"]))}});var Ss=W(Ns,[["__scopeId","data-v-10effbe8"]]);const Cs={class:"field"},Is={key:0,class:"field-title"},mn=z({__name:"Select",props:{title:null,modelValue:null,options:null,placeholder:null,closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){var d;const n=e,r=st($e(n,"title"),"span"),i=P((d=n.options.find(l=>l.value===n.modelValue))!=null?d:null);Me($e(n,"modelValue"),l=>{var o;le(i)!==l&&(i.value=(o=n.options.find(m=>m.value===l))!=null?o:null)});function s(l){t("update:modelValue",l.value)}return(l,o)=>(p(),N("div",Cs,[c(r)?(p(),N("span",Is,[(p(),q(ue(c(r))))])):x("",!0),w(c(Tn),{options:e.options,modelValue:i.value,"onUpdate:modelValue":[o[0]||(o[0]=m=>i.value=m),s],min:1,"label-by":"label",placeholder:e.placeholder,"close-on-select":e.closeOnSelect},null,8,["options","modelValue","placeholder","close-on-select"])]))}});const ks={class:"field"},Ms=z({__name:"Toggle",props:{title:null,modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,r=$(()=>{var s;return be((s=c(n.title))!=null?s:"<span></span>","span")}),i=$({get(){return!!n.modelValue},set(s){t("update:modelValue",s)}});return(s,d)=>(p(),N("label",ks,[Mt(f("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":d[0]||(d[0]=l=>ae(i)?i.value=l:null)},null,512),[[Mn,c(i)]]),(p(),q(ue(c(r))))]))}});var ye=W(Ms,[["__scopeId","data-v-11046116"]]);const $s={class:"header"},xs=f("h2",null,"Settings",-1),Fs={class:"option-tabs"},Ts={key:0},Ps={key:1};var Es=z({__name:"Options",setup(e,{expose:t}){const n=P(!1),r=P("behaviour");function i(ne){return ne==r.value}function s(ne){r.value=ne}t({isTab:i,setTab:s,save:de,open(){n.value=!0}});const d=Object.keys(vt).map(ne=>({label:Xr(ne),value:ne})),l=$(()=>be(ie(()=>w(re,null,[ai.map(Be)])))),{showTPS:o,theme:m,unthrottled:b,alignUnits:v}=ge(X),{autosave:y,offlineProd:S}=ge(D),I=$({get(){return D.devSpeed===0},set(ne){D.devSpeed=ne?0:null}}),C=ie(()=>w("span",{class:"option-title"},[V("Unthrottled"),w("desc",null,[V("Allow the game to run as fast as possible. Not battery friendly.")])])),j=ie(()=>w("span",{class:"option-title"},[V("Offline Production"),w(Q,{display:"Save-specific",direction:U.Right},{default:()=>[V("*")]}),w("desc",null,[V("Simulate production that occurs while the game is closed.")])])),H=ie(()=>w("span",{class:"option-title"},[V("Autosave"),w(Q,{display:"Save-specific",direction:U.Right},{default:()=>[V("*")]}),w("desc",null,[V("Automatically save the game every second or when the game is closed.")])])),k=ie(()=>w("span",{class:"option-title"},[V("Pause game"),w(Q,{display:"Save-specific",direction:U.Right},{default:()=>[V("*")]}),w("desc",null,[V("Stop everything from moving.")])])),M=ie(()=>w("span",{class:"option-title"},[V("Theme"),w("desc",null,[V("How the game looks.")])])),B=ie(()=>w("span",{class:"option-title"},[V("Show TPS"),w("desc",null,[V("Show TPS meter at the bottom-left corner of the page.")])])),ce=ie(()=>w("span",{class:"option-title"},[V("Align modifier units"),w("desc",null,[V("Align numbers to the beginning of the unit in modifier view.")])]));return(ne,G)=>(p(),q(Re,{modelValue:n.value,"onUpdate:modelValue":G[10]||(G[10]=ee=>n.value=ee)},{header:T(()=>[f("div",$s,[xs,f("div",Fs,[f("button",{class:te({selected:i("behaviour")}),onClick:G[0]||(G[0]=ee=>s("behaviour"))},"Behaviour",2),f("button",{class:te({selected:i("appearance")}),onClick:G[1]||(G[1]=ee=>s("appearance"))},"Appearance",2)])])]),body:T(()=>[i("behaviour")?(p(),N("div",Ts,[w(ye,{title:c(C),modelValue:c(b),"onUpdate:modelValue":G[2]||(G[2]=ee=>ae(b)?b.value=ee:null)},null,8,["title","modelValue"]),c(R).enablePausing?(p(),q(ye,{key:0,title:c(k),modelValue:c(I),"onUpdate:modelValue":G[3]||(G[3]=ee=>ae(I)?I.value=ee:null)},null,8,["title","modelValue"])):x("",!0),w(ye,{title:c(j),modelValue:c(S),"onUpdate:modelValue":G[4]||(G[4]=ee=>ae(S)?S.value=ee:null)},null,8,["title","modelValue"]),w(ye,{title:c(H),modelValue:c(y),"onUpdate:modelValue":G[5]||(G[5]=ee=>ae(y)?y.value=ee:null)},null,8,["title","modelValue"]),c(y)?x("",!0):(p(),q(xt,{key:1,class:"button save-button",onClick:G[6]||(G[6]=ee=>c(de)())},{default:T(()=>[V("Manually save")]),_:1}))])):x("",!0),i("appearance")?(p(),N("div",Ps,[w(mn,{title:c(M),options:c(d),modelValue:c(m),"onUpdate:modelValue":G[7]||(G[7]=ee=>ae(m)?m.value=ee:null)},null,8,["title","options","modelValue"]),(p(),q(ue(c(l)))),w(ye,{title:c(B),modelValue:c(o),"onUpdate:modelValue":G[8]||(G[8]=ee=>ae(o)?o.value=ee:null)},null,8,["title","modelValue"]),w(ye,{title:c(ce),modelValue:c(v),"onUpdate:modelValue":G[9]||(G[9]=ee=>ae(v)?v.value=ee:null)},null,8,["title","modelValue"])])):x("",!0)]),_:1},8,["modelValue"]))}});const Vs=["onSubmit"],Os={class:"field"},Ls={key:0,class:"field-title"},Ds=["placeholder"],qs=z({__name:"Text",props:{title:null,modelValue:null,textArea:{type:Boolean},placeholder:null,maxHeight:null,submitOnBlur:{type:Boolean}},emits:["update:modelValue","submit","cancel"],setup(e,{emit:t}){const n=e,r=st($e(n,"title"),"span"),i=Ae(null);ht(()=>{var o;(o=i.value)==null||o.focus()});const s=$({get(){var o;return(o=c(n.modelValue))!=null?o:""},set(o){t("update:modelValue",o)}});function d(){t("submit")}function l(){n.submitOnBlur!==!1?t("submit"):t("cancel")}return(o,m)=>(p(),N("form",{onSubmit:Qe(d,["prevent"])},[f("div",Os,[c(r)?(p(),N("span",Ls,[(p(),q(ue(c(r))))])):x("",!0),e.textArea?(p(),q(c(En),{key:1,modelValue:c(s),"onUpdate:modelValue":m[0]||(m[0]=b=>ae(s)?s.value=b:null),placeholder:e.placeholder,maxHeight:e.maxHeight,onBlur:l,ref_key:"field",ref:i},null,8,["modelValue","placeholder","maxHeight"])):Mt((p(),N("input",{key:2,type:"text","onUpdate:modelValue":m[1]||(m[1]=b=>ae(s)?s.value=b:null),placeholder:e.placeholder,class:te({fullWidth:!e.title}),onBlur:l,ref_key:"field",ref:i},null,42,Ds)),[[$n,c(s)]])])],40,Vs))}});var hn=W(qs,[["__scopeId","data-v-90bd4994"]]);const Bs={key:0},As=["onClick","disabled"],Rs={key:0},zs=["onClick"],Us=z({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(e,{emit:t}){const r=ge(e),i=P(!1);Me(i,l=>{t("confirmingChanged",l)});function s(){if(c(r.skipConfirm)){t("click");return}i.value&&t("click"),i.value=!i.value}function d(){i.value=!1}return(l,o)=>(p(),N("span",{class:te(["container",{confirming:i.value}])},[i.value?(p(),N("span",Bs,"Are you sure?")):x("",!0),f("button",{onClick:Qe(s,["stop"]),class:"button danger",disabled:e.disabled},[i.value?(p(),N("span",Rs,"Yes")):Ie(l.$slots,"default",{key:1},void 0,!0)],8,As),i.value?(p(),N("button",{key:1,class:"button",onClick:Qe(d,["stop"])},"No",8,zs)):x("",!0)],2))}});var js=W(Us,[["__scopeId","data-v-2f8ef34c"]]);const Ne=e=>(xe("data-v-32313015"),e=e(),Fe(),e),Gs=Ne(()=>f("div",{class:"handle material-icons"},"drag_handle",-1)),Ws={key:0,class:"actions"},Hs=Ne(()=>f("span",{class:"material-icons"},"content_paste",-1)),Js=Ne(()=>f("span",{class:"material-icons"},"content_copy",-1)),Zs=Ne(()=>f("span",{class:"material-icons"},"edit",-1)),Ks=Ne(()=>f("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)),Ys={key:1,class:"actions"},Xs=Ne(()=>f("span",{class:"material-icons"},"check",-1)),Qs=Ne(()=>f("span",{class:"material-icons"},"close",-1)),eo={key:2,class:"details"},to={class:"save-version"},no=Ne(()=>f("br",null,null,-1)),ro={key:0},io={key:3,class:"details"},ao={key:4,class:"details error"},so=Ne(()=>f("br",null,null,-1)),oo=z({__name:"Save",props:{save:null},emits:["export","open","duplicate","delete","editName"],setup(e,{emit:t}){const n=e,{save:r}=ge(n),i=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),s=P(!1),d=P(!1),l=P("");Me(s,()=>{var v;return l.value=(v=r.value.name)!=null?v:""});const o=$(()=>r.value!=null&&r.value.id===D.id),m=$(()=>{var v;return o.value?D.time:(v=r.value!=null&&r.value.time)!=null?v:0});function b(){t("editName",l.value),s.value=!1}return(v,y)=>(p(),N("div",{class:te(["save",{active:c(o)}])},[Gs,s.value?(p(),N("div",Ys,[f("button",{onClick:b,class:"button"},[w(Q,{display:"Save",direction:c(U).Left,class:"info"},{default:T(()=>[Xs]),_:1},8,["direction"])]),f("button",{onClick:y[5]||(y[5]=S=>s.value=!s.value),class:"button"},[w(Q,{display:"Cancel",direction:c(U).Left,class:"info"},{default:T(()=>[Qs]),_:1},8,["direction"])])])):(p(),N("div",Ws,[c(r).error==null&&!d.value?(p(),q(xt,{key:0,onClick:y[0]||(y[0]=S=>t("export")),class:"button",left:""},{default:T(()=>[w(Q,{display:"Export",direction:c(U).Left,class:"info"},{default:T(()=>[Hs]),_:1},8,["direction"])]),_:1})):x("",!0),c(r).error==null&&!d.value?(p(),N("button",{key:1,onClick:y[1]||(y[1]=S=>t("duplicate")),class:"button"},[w(Q,{display:"Duplicate",direction:c(U).Left,class:"info"},{default:T(()=>[Js]),_:1},8,["direction"])])):x("",!0),c(r).error==null&&!d.value?(p(),N("button",{key:2,onClick:y[2]||(y[2]=S=>s.value=!s.value),class:"button"},[w(Q,{display:"Edit Name",direction:c(U).Left,class:"info"},{default:T(()=>[Zs]),_:1},8,["direction"])])):x("",!0),w(js,{disabled:c(o),onClick:y[3]||(y[3]=S=>t("delete")),onConfirmingChanged:y[4]||(y[4]=S=>d.value=S)},{default:T(()=>[w(Q,{display:"Delete",direction:c(U).Left,class:"info"},{default:T(()=>[Ks]),_:1},8,["direction"])]),_:1},8,["disabled"])])),c(r).error==null&&!s.value?(p(),N("div",eo,[f("button",{class:"button open",onClick:y[6]||(y[6]=S=>t("open"))},[f("h3",null,L(c(r).name),1)]),f("span",to,"v"+L(c(r).modVersion),1),no,c(m)?(p(),N("div",ro,"Last played "+L(c(i).format(c(m))),1)):x("",!0)])):c(r).error==null&&s.value?(p(),N("div",io,[w(hn,{modelValue:l.value,"onUpdate:modelValue":y[7]||(y[7]=S=>l.value=S),class:"editname",onSubmit:b},null,8,["modelValue"])])):(p(),N("div",ao,[V(" Error: Failed to load save with id "+L(c(r).id),1),so,V(L(c(r).error),1)]))],2))}});var lo=W(oo,[["__scopeId","data-v-32313015"]]);const Bt=e=>(xe("data-v-2a4275be"),e=e(),Fe(),e),uo=Bt(()=>f("h2",null,"Saves Manager",-1)),co={class:"modal-footer"},go={class:"field"},fo=Bt(()=>f("span",{class:"field-title"},"Create Save",-1)),mo={class:"field-buttons"},ho={class:"footer"},po=Bt(()=>f("div",{style:{"flex-grow":"1"}},null,-1)),vo=z({__name:"SavesManager",setup(e,{expose:t}){const n=P(!1),r=P(null);t({open(){n.value=!0}});const i=P(!1),s=P(""),d=P(null);Me(s,k=>{k?Ge(()=>{try{if(k[0]!=="{")if(k[0]==="e")k=decodeURIComponent(escape(atob(k)));else if(k[0]==="\u1BE1")k=_e.decompressFromUTF16(k);else{console.warn("Unable to determine preset encoding",k),i.value=!0;return}const M=JSON.parse(k);if(typeof M!="object"){i.value=!0;return}const B=ut();M.id=B,de(M),s.value="",i.value=!1,X.saves.push(B)}catch{i.value=!0}}):i.value=!1});let l={},o=P(Object.keys(l).reduce((k,M)=>(k.push({label:M.split("/").slice(-1)[0].slice(0,-4),value:l[M]}),k),[]));const m=It({});function b(k){if(m[k]==null){let M=localStorage.getItem(k);if(M==null)m[k]={error:"Save doesn't exist in localStorage",id:k};else if(M==="dW5kZWZpbmVk")m[k]={error:"Save is undefined",id:k};else try{if(M[0]!=="{")if(M[0]==="e")M=decodeURIComponent(escape(atob(M)));else if(M[0]==="\u1BE1")M=_e.decompressFromUTF16(M);else return console.warn("Unable to determine preset encoding",M),i.value=!0,m[k]={error:"Unable to determine preset encoding",id:k},m[k];m[k]={...JSON.parse(M),id:k}}catch(B){m[k]={error:B,id:k},console.warn(`SavesManager: Failed to load info about save with id ${k}:
${B}
${M}`)}}return m[k]}Me(n,k=>{k&&Object.keys(m).forEach(M=>delete m[M])});const v=$(()=>X.saves.reduce((k,M)=>(k[M]=b(M),k),{}));function y(k){let M;switch(D.id===k?M=$t(D):M=JSON.stringify(v.value[k]),R.exportEncoding){default:console.warn(`Unknown save encoding: ${R.exportEncoding}. Defaulting to lz`);case"lz":M=_e.compressToUTF16(M);break;case"base64":M=btoa(unescape(encodeURIComponent(M)));break;case"plain":break}const B=document.createElement("textarea");B.value=M,document.body.appendChild(B),B.select(),B.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(B)}function S(k){D.id===k&&de();const M={...v.value[k],id:ut()};de(M),X.saves.push(M.id)}function I(k){X.saves=X.saves.filter(M=>M!==k),localStorage.removeItem(k),m[k]=void 0}function C(k){v.value[D.id].time=D.time,de(),m[D.id]=void 0,Ve(v.value[k]),m[k]=void 0}function j(k){if(d.value=k,Ge(()=>{d.value=null}),k[0]!=="{")if(k[0]==="e")k=decodeURIComponent(escape(atob(k)));else if(k[0]==="\u1BE1")k=_e.decompressFromUTF16(k);else{console.warn("Unable to determine preset encoding",k);return}const M=JSON.parse(k);M.id=ut(),de(M),X.saves.push(M.id),C(M.id)}function H(k,M){const B=v.value[k];B!=null&&(B.name=M,D.id===k?(D.name=M,de()):(de(B),m[k]=void 0))}return(k,M)=>(p(),q(Re,{modelValue:n.value,"onUpdate:modelValue":M[4]||(M[4]=B=>n.value=B),ref_key:"modal",ref:r},{header:T(()=>[uo]),body:T(({shown:B})=>[B?(p(),q(c(Pn),{key:0,list:c(X).saves,handle:".handle",itemKey:ce=>ce},{item:T(({element:ce})=>[w(lo,{save:c(v)[ce],onOpen:ne=>C(ce),onExport:ne=>y(ce),onEditName:ne=>H(ce,ne),onDuplicate:ne=>S(ce),onDelete:ne=>I(ce)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):x("",!0)]),footer:T(()=>[f("div",co,[w(hn,{modelValue:s.value,"onUpdate:modelValue":M[0]||(M[0]=B=>s.value=B),title:"Import Save",placeholder:"Paste your save here!",class:te({importingFailed:i.value})},null,8,["modelValue","class"]),f("div",go,[fo,f("div",mo,[f("button",{class:"button",onClick:M[1]||(M[1]=B=>C(c(Ue)().id))},"New Game"),Object.keys(c(o)).length>0?(p(),q(mn,{key:0,options:c(o),modelValue:d.value,"onUpdate:modelValue":M[2]||(M[2]=B=>j(B)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):x("",!0)])]),f("div",ho,[po,f("button",{class:"button modal-default-button",onClick:M[3]||(M[3]=B=>n.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}});var pn=W(vo,[["__scopeId","data-v-2a4275be"]]);const fe=e=>(xe("data-v-47c54e31"),e=e(),Fe(),e),bo=["src","alt"],yo={key:1,class:"title"},_o=fe(()=>f("div",{style:{"flex-grow":"1",cursor:"unset"}},null,-1)),wo={class:"discord"},No={class:"discord-links"},So={key:0},Co=["href"],Io=fe(()=>f("li",null,[f("a",{href:"https://discord.gg/yJ4fjnjU54",target:"_blank"},"Profectus & Friends")],-1)),ko=fe(()=>f("li",null,[f("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),Mo={href:"https://forums.moddingtree.com/",target:"_blank"},$o=fe(()=>f("span",{class:"material-icons"},"forum",-1)),xo=fe(()=>f("span",{class:"material-icons"},"info",-1)),Fo=fe(()=>f("span",{class:"material-icons"},"library_books",-1)),To=fe(()=>f("span",{class:"material-icons"},"settings",-1)),Po=fe(()=>f("span",{class:"material-icons"},"library_books",-1)),Eo=fe(()=>f("span",{class:"material-icons"},"settings",-1)),Vo=fe(()=>f("span",{class:"material-icons"},"info",-1)),Oo={href:"https://forums.moddingtree.com/",target:"_blank"},Lo=fe(()=>f("span",{class:"material-icons"},"forum",-1)),Do={class:"discord"},qo={class:"discord-links"},Bo={key:0},Ao=["href"],Ro=fe(()=>f("li",null,[f("a",{href:"https://discord.gg/yJ4fjnjU54",target:"_blank"},"Profectus & Friends")],-1)),zo=fe(()=>f("li",null,[f("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),Uo=z({__name:"Nav",setup(e){const t=P(null),n=P(null),r=P(null),i=P(null),{useHeader:s,banner:d,title:l,discordName:o,discordLink:m,versionNumber:b}=R;function v(){window.open(m,"mywindow")}return(y,S)=>(p(),N(re,null,[c(s)?(p(),N("div",De({key:0,class:"nav"},y.$attrs),[c(d)?(p(),N("img",{key:0,src:c(d),class:"banner",alt:c(l)},null,8,bo)):(p(),N("div",yo,L(c(l)),1)),f("div",{onClick:S[0]||(S[0]=I=>{var C;return(C=i.value)==null?void 0:C.open()}),class:"version-container"},[w(Q,{display:"Changelog",direction:c(U).Down,class:"version"},{default:T(()=>[f("span",null,"v"+L(c(b)),1)]),_:1},8,["direction"])]),_o,f("div",wo,[f("span",{onClick:v,class:"material-icons"},"discord"),f("ul",No,[c(m)?(p(),N("li",So,[f("a",{href:c(m),target:"_blank"},L(c(o)),9,Co)])):x("",!0),Io,ko])]),f("div",null,[f("a",Mo,[w(Q,{display:"Forums",direction:c(U).Down,yoffset:"5px"},{default:T(()=>[$o]),_:1},8,["direction"])])]),f("div",{onClick:S[1]||(S[1]=I=>{var C;return(C=t.value)==null?void 0:C.open()})},[w(Q,{display:"Info",direction:c(U).Down,class:"info"},{default:T(()=>[xo]),_:1},8,["direction"])]),f("div",{onClick:S[2]||(S[2]=I=>{var C;return(C=n.value)==null?void 0:C.open()})},[w(Q,{display:"Saves",direction:c(U).Down,xoffset:"-20px"},{default:T(()=>[Fo]),_:1},8,["direction"])]),f("div",{onClick:S[3]||(S[3]=I=>{var C;return(C=r.value)==null?void 0:C.open()})},[w(Q,{display:"Settings",direction:c(U).Down,xoffset:"-66px"},{default:T(()=>[To]),_:1},8,["direction"])])],16)):(p(),N("div",De({key:1,class:"overlay-nav"},y.$attrs),[f("div",{onClick:S[4]||(S[4]=I=>{var C;return(C=i.value)==null?void 0:C.open()}),class:"version-container"},[w(Q,{display:"Changelog",direction:c(U).Right,xoffset:"25%",class:"version"},{default:T(()=>[f("span",null,"v"+L(c(b)),1)]),_:1},8,["direction"])]),f("div",{onClick:S[5]||(S[5]=I=>{var C;return(C=n.value)==null?void 0:C.open()})},[w(Q,{display:"Saves",direction:c(U).Right},{default:T(()=>[Po]),_:1},8,["direction"])]),f("div",{onClick:S[6]||(S[6]=I=>{var C;return(C=r.value)==null?void 0:C.open()})},[w(Q,{display:"Settings",direction:c(U).Right},{default:T(()=>[Eo]),_:1},8,["direction"])]),f("div",{onClick:S[7]||(S[7]=I=>{var C;return(C=t.value)==null?void 0:C.open()})},[w(Q,{display:"Info",direction:c(U).Right},{default:T(()=>[Vo]),_:1},8,["direction"])]),f("div",null,[f("a",Oo,[w(Q,{display:"Forums",direction:c(U).Right,xoffset:"7px"},{default:T(()=>[Lo]),_:1},8,["direction"])])]),f("div",Do,[f("span",{onClick:v,class:"material-icons"},"discord"),f("ul",qo,[c(m)?(p(),N("li",Bo,[f("a",{href:c(m),target:"_blank"},L(c(o)),9,Ao)])):x("",!0),Ro,zo])])],16)),w(Ss,{ref_key:"info",ref:t,changelog:i.value},null,8,["changelog"]),w(pn,{ref_key:"savesManager",ref:n},null,512),w(Es,{ref_key:"options",ref:r},null,512),w(is,{ref_key:"changelog",ref:i},null,512)],64))}});var vn=W(Uo,[["__scopeId","data-v-47c54e31"]]);const jo={class:"inner-tab"},Go=z({__name:"Game",setup(e){const t=$e(D,"tabs"),n=$(()=>Object.keys(oe)),r=R.useHeader;function i(s){const{display:d,minimized:l,name:o,color:m,minimizable:b,nodes:v,minimizedDisplay:y}=s;return{display:d,minimized:l,name:o,color:m,minimizable:b,nodes:v,minimizedDisplay:y}}return(s,d)=>(p(),N("div",{class:te(["tabs-container",{useHeader:c(r)}])},[(p(!0),N(re,null,Ee(c(t),(l,o)=>{var m,b;return p(),N("div",{key:o,class:te(["tab",c((m=c(oe)[l])==null?void 0:m.classes)]),style:se(c((b=c(oe)[l])==null?void 0:b.style))},[o===0&&!c(r)?(p(),q(vn,{key:0})):x("",!0),f("div",jo,[c(n).includes(l)?(p(),q(es,De({key:0},i(c(oe)[l]),{index:o,onSetMinimized:v=>c(oe)[l].minimized.value=v}),null,16,["index","onSetMinimized"])):(p(),q(ue(l),{key:1,index:o},null,8,["index"]))])],6)}),128))],2))}});var Wo=W(Go,[["__scopeId","data-v-dcd207b4"]]);const Ho={key:0},Jo={key:0,class:"mark star"},Zo=["src"],Ko=z({__name:"MarkNode",props:{mark:{type:[Boolean,String]}},setup(e){return(t,n)=>e.mark?(p(),N("div",Ho,[e.mark===!0?(p(),N("div",Jo)):(p(),N("img",{key:1,class:"mark",src:e.mark},null,8,Zo))])):x("",!0)}});var Yo=W(Ko,[["__scopeId","data-v-2207999f"]]);const Xo=z({__name:"Node",props:{id:null},setup(e){const n=ge(e),r=zt(Lt,()=>{}),i=zt(Dt,()=>{}),s=Ae(null),d=$(()=>s.value&&s.value.parentElement);return Me([d,n.id],([l,o],[m,b])=>{m&&i(c(b)),l&&r(o,l)}),xn(()=>i(c(n.id))),(l,o)=>(p(),N("div",{class:"node",ref_key:"node",ref:s},null,512))}});var Qo=W(Xo,[["__scopeId","data-v-a48cb382"]]);const el=z({props:{progress:{type:O(String,Object,Number),required:!0},width:{type:O(Number),required:!0},height:{type:O(Number),required:!0},direction:{type:O(String),required:!0},display:O(Object,String,Function),visibility:{type:O(Number,Boolean),required:!0},style:O(Object,String,Array),classes:O(Object),borderStyle:O(Object,String,Array),textStyle:O(Object,String,Array),baseStyle:O(Object,String,Array),fillStyle:O(Object,String,Array),mark:O(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:Yo,Node:Qo},setup(e){const{progress:t,width:n,height:r,direction:i,display:s}=ge(e),d=$(()=>{let m=t.value instanceof u?t.value.toNumber():Number(t.value);return(1-Math.min(Math.max(m,0),1))*100}),l=$(()=>{const m={width:le(n)+.5+"px",height:le(r)+.5+"px"};switch(c(i)){case U.Up:m.clipPath=`inset(${d.value}% 0% 0% 0%)`,m.width=le(n)+1+"px";break;case U.Down:m.clipPath=`inset(0% 0% ${d.value}% 0%)`,m.width=le(n)+1+"px";break;case U.Right:m.clipPath=`inset(0% ${d.value}% 0% 0%)`;break;case U.Left:m.clipPath=`inset(0% 0% 0% ${d.value}%)`;break;case U.Default:m.clipPath="inset(0% 50% 0% 0%)";break}return m}),o=st(s);return{normalizedProgress:d,barStyle:l,component:o,unref:c,Visibility:qe,isVisible:rt,isHidden:Et}}});function tl(e,t,n,r,i,s){var o,m,b,v,y,S,I;const d=We("MarkNode"),l=We("Node");return e.isVisible(e.visibility)?(p(),N("div",{key:0,style:se([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px",visibility:e.isHidden(e.visibility)?"hidden":void 0},(o=e.unref(e.style))!=null?o:{}]),class:te({bar:!0,...e.unref(e.classes)})},[f("div",{class:"overlayTextContainer border",style:se([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px"},(m=e.unref(e.borderStyle))!=null?m:{}])},[e.component?(p(),N("span",{key:0,class:"overlayText",style:se(e.unref(e.textStyle))},[(p(),q(ue(e.component)))],4)):x("",!0)],4),f("div",{class:"border",style:se([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px"},(b=e.unref(e.style))!=null?b:{},(v=e.unref(e.baseStyle))!=null?v:{},(y=e.unref(e.borderStyle))!=null?y:{}])},[f("div",{class:"fill",style:se([e.barStyle,(S=e.unref(e.style))!=null?S:{},(I=e.unref(e.fillStyle))!=null?I:{}])},null,4)],4),w(d,{mark:e.unref(e.mark)},null,8,["mark"]),w(l,{id:e.id},null,8,["id"])],6)):x("",!0)}var nl=W(el,[["render",tl],["__scopeId","data-v-10cb85f8"]]);const rl=Symbol("Bar");function bn(e,...t){const n=t.reduce((r,i)=>{var s;return Object.assign(r,(s=i.getPersistentData)==null?void 0:s.call(i))},{});return bt(r=>{var d,l;const i=e.call(r,r);i.id=Pt("bar-"),i.type=rl,i[He]=nl;for(const o of t)(d=o.preConstruct)==null||d.call(o,i);Object.assign(i,n),A(i,"visibility"),Le(i,"visibility",qe.Visible),A(i,"width"),A(i,"height"),A(i,"direction"),A(i,"style"),A(i,"classes"),A(i,"borderStyle"),A(i,"baseStyle"),A(i,"textStyle"),A(i,"fillStyle"),A(i,"progress"),A(i,"display"),A(i,"mark");for(const o of t)(l=o.postConstruct)==null||l.call(o,i);const s=t.reduce((o,m)=>{var b;return Object.assign(o,(b=m.getGatheredProps)==null?void 0:b.call(m,i))},{});return i[at]=function(){const{progress:o,width:m,height:b,direction:v,display:y,visibility:S,style:I,classes:C,borderStyle:j,textStyle:H,baseStyle:k,fillStyle:M,mark:B,id:ce}=this;return{progress:o,width:m,height:b,direction:v,display:y,visibility:S,style:c(I),classes:C,borderStyle:j,textStyle:H,baseStyle:k,fillStyle:M,mark:B,id:ce,...s}},i})}pe.on("setupVue",e=>e.use(Vn));function il(e="white",t="8px"){return{transform:"scale(1.05, 1.05)",borderColor:"rgba(0, 0, 0, 0.125)",boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 ${t} ${e}`,zIndex:1}}const al=z({props:{visibility:{type:O(Number,Boolean),required:!0},display:{type:O(Object,String,Function),required:!0},style:O(String,Object,Array),classes:O(Object),glowColor:O(String),active:Boolean,floating:Boolean},emits:["selectTab"],setup(e,{emit:t}){const{display:n,glowColor:r,floating:i}=ge(e),s=Ot(n),d=$(()=>{const o=le(r);return o==null||o===""?{}:c(i)?il(o):{boxShadow:`0px 9px 5px -6px ${o}`}});function l(){t("selectTab")}return{selectTab:l,component:s,glowColorStyle:d,unref:c,Visibility:qe,isVisible:rt,isHidden:Et}}});function sl(e,t,n,r,i,s){var d;return e.isVisible(e.visibility)?(p(),N("button",{key:0,onClick:t[0]||(t[0]=(...l)=>e.selectTab&&e.selectTab(...l)),class:te(["tabButton",{active:e.active,...e.unref(e.classes)}]),style:se([{visibility:e.isHidden(e.visibility)?"hidden":void 0},e.glowColorStyle,(d=e.unref(e.style))!=null?d:{}])},[(p(),q(ue(e.component)))],6)):x("",!0)}var yn=W(al,[["render",sl],["__scopeId","data-v-21427abb"]]);const ol=z({__name:"Sticky",setup(e){const t=P("0"),n=new ResizeObserver(i),r=Ae(null);function i(){let s=r.value;if(s==null)return;let d=0;for(;s.previousSibling;){const l=s.previousSibling;l.dataset&&"vSticky"in l.dataset&&(d+=l.offsetHeight),s=l}t.value=d+"px"}return Ge(i),document.fonts.ready.then(i),ht(()=>{var d;const s=(d=r.value)==null?void 0:d.parentElement;s&&n.observe(s)}),(s,d)=>(p(),N("div",{class:"sticky",style:se({top:t.value}),ref_key:"element",ref:r,"data-v-sticky":""},[Ie(s.$slots,"default",{},void 0,!0)],4))}});var ll=W(ol,[["__scopeId","data-v-cccac690"]]);const ul=z({props:{visibility:{type:O(Number,Boolean),required:!0},activeTab:{type:O(Object),required:!0},selected:{type:Object,required:!0},tabs:{type:O(Object),required:!0},style:O(String,Object,Array),classes:O(Object),buttonContainerStyle:O(String,Object,Array),buttonContainerClasses:O(Object)},components:{Sticky:ll,TabButton:yn},setup(e){const{activeTab:t}=ge(e),n=$(()=>vt[X.theme].floatingTabs),r=Ae("");kt(()=>{const l=le(t);if(l==null){r.value="";return}if(Xe(l)){r.value=be(l);return}r.value=be(c(l.display))});const i=$(()=>{const l=le(t);return Xe(l)||!l?void 0:c(l.classes)}),s=$(()=>{const l=le(t);return Xe(l)||!l?void 0:c(l.style)});function d(l){const{display:o,style:m,classes:b,glowColor:v,visibility:y}=l;return{display:o,style:c(m),classes:b,glowColor:v,visibility:y}}return{floating:n,tabClasses:i,tabStyle:s,Visibility:qe,component:r,gatherButtonProps:d,unref:c,isVisible:rt,isHidden:Et}}});function cl(e,t,n,r,i,s){var o,m;const d=We("TabButton"),l=We("Sticky");return e.isVisible(e.visibility)?(p(),N("div",{key:0,class:te(["tab-family-container",{...e.unref(e.classes),...e.tabClasses}]),style:se([{visibility:e.isHidden(e.visibility)?"hidden":void 0},(o=e.unref(e.style))!=null?o:[],(m=e.tabStyle)!=null?m:[]])},[w(l,{class:te(["tab-buttons-container",e.unref(e.buttonContainerClasses)]),style:se(e.unref(e.buttonContainerStyle))},{default:T(()=>[f("div",{class:te(["tab-buttons",{floating:e.floating}])},[(p(!0),N(re,null,Ee(e.unref(e.tabs),(b,v)=>(p(),q(d,De({onSelectTab:y=>e.selected.value=v,floating:e.floating,key:v,active:e.unref(b.tab)===e.unref(e.activeTab)},e.gatherButtonProps(b)),null,16,["onSelectTab","floating","active"]))),128))],2)]),_:1},8,["class","style"]),e.unref(e.activeTab)?(p(),q(ue(e.unref(e.component)),{key:0})):x("",!0)],6)):x("",!0)}var dl=W(ul,[["render",cl],["__scopeId","data-v-58dbf83a"]]);const gl=Symbol("TabButton"),fl=Symbol("TabFamily");function ml(e,t){Object.keys(e).length===0&&console.error("Cannot create tab family with 0 tabs");const n=mt(Object.keys(e)[0],!1);return bt(r=>{var d;const i=(d=t==null?void 0:t.call(r,r))!=null?d:{};i.id=Pt("tabFamily-"),i.type=fl,i[He]=dl,i.tabs=Object.keys(e).reduce((l,o)=>{const m=e[o]();return m.type=gl,m[He]=yn,A(m,"visibility"),Le(m,"visibility",qe.Visible),A(m,"tab"),A(m,"display"),A(m,"classes"),A(m,"style"),A(m,"glowColor"),l[o]=m,l},{}),i.selected=n,i.activeTab=$(()=>{const l=c(s.tabs);if(n.value in l&&rt(l[n.value].visibility))return c(l[n.value].tab);const o=Object.values(l).find(m=>rt(m.visibility));return o?c(o.tab):null}),A(i,"visibility"),Le(i,"visibility",qe.Visible),A(i,"classes"),A(i,"style"),A(i,"buttonContainerClasses"),A(i,"buttonContainerStyle"),i[at]=function(){const{visibility:l,activeTab:o,selected:m,tabs:b,style:v,classes:y,buttonContainerClasses:S,buttonContainerStyle:I}=this;return{visibility:l,activeTab:o,selected:m,tabs:b,style:c(v),classes:y,buttonContainerClasses:S,buttonContainerStyle:I}};const s=i;return s})}const hl=z({__name:"Tab",props:{display:null},setup(e){const t=e,{display:n}=ge(t),r=Ot(n);return(i,s)=>(p(),q(ue(c(r))))}}),pl=Symbol("Tab");function vl(e){return bt(t=>{const n=e.call(t,t);return n.id=Pt("tab-"),n.type=pl,n[He]=hl,n[at]=function(){const{display:r}=this;return{display:r}},n})}var _n=qt("games",function(){const e=mt("",!1);function t(o){const{name:m,action:b,data:v,color:y,can:S=()=>!0,gain:I,uses:C,...j}=o,H=mt(0),k=$(()=>v(H.value)),M=$(()=>S()&&C.value>0),B=$(()=>I()),ce=bn(()=>({width:100,height:30,direction:U.Right,progress:()=>H.value%1,display:()=>e.value===m?`${tt(B.value)}/s`:b,textStyle:{color:y},baseStyle:{"background-color":"grey"}}));function ne(){M.value&&(e.value=m)}return{name:m,progress:H,gain:B,uses:Wa(C),can:M,...j,display:ie(()=>w("div",{class:"box",style:{"border-color":y}},[w("div",{style:{width:"100%"}},[w("span",{class:"big-header"},[m]),w("br",null,null),w("hr",null,null)]),w("div",{style:{"font-size":"10px"}},[k.value.map(G=>w("div",null,[G]))]),w("div",{onClick:ne},[Be(ce)])]))}}function n(o){return Ft(Math.floor(o))}const r=t({name:"Ideas",action:"Think",data:o=>[`${n(o)} ideas`],color:"blue",gain:()=>1,spend:$(()=>0),uses:P(1)}),i=t({name:"Features",action:"Create",data:o=>[`${n(o)} features`],color:"pink",gain:()=>1,spend:$(()=>1),uses:r.progress}),s=t({name:"Programming",action:"Program",data:o=>[`${n(o)} lines of code`],color:"green",gain:()=>1,spend:$(()=>1),uses:i.progress}),d=t({name:"Mechanics",action:"Modify",data:o=>[`${n(o)} mechanics`],color:"orange",gain:()=>1,spend:$(()=>1),uses:s.progress}),l=[r,i,s,d];return pe.on("update",o=>{const m=l.find(b=>b.name===e.value);if(m!==void 0&&m.can.value){const b=Math.min(o,m.uses.value/m.spend.value);m.progress.value+=m.gain.value*b,m.uses.value-=m.spend.value*b}}),{name:"Games",doingAction:e,all:l,display:ie(()=>w("div",{class:"contain"},[l.map(o=>Be(o.display))]))}});const wn=qt("main",function(){const e=$(()=>10),t=$(()=>100),n=bn(()=>({width:400,height:50,direction:U.Right,progress:()=>e.value/t.value,display:ie(()=>w(re,null,[w("span",{style:{color:"red"}},[tt(e.value)]),V(" / "),tt(t.value),V(" Pressure")])),fillStyle:{"background-color":"grey"}})),r=ml({games:()=>({tab:vl(()=>({display:_n.display})),display:"Games"})});return{name:"Main",display:ie(()=>w(re,null,[Be(n),Be(r)])),tabs:r}}),bl=e=>[wn,_n],Nn=$(()=>!1);function yl(e,t){}var _l=Object.freeze(Object.defineProperty({__proto__:null,main:wn,getInitialLayers:bl,hasWon:Nn,fixOldSave:yl},Symbol.toStringTag,{value:"Module"}));const ot=e=>(xe("data-v-4a50ce42"),e=e(),Fe(),e),wl={class:"game-over-modal-header"},Nl=["src","alt"],Sl={class:"game-over-modal-title"},Cl=ot(()=>f("h2",null,"Congratulations!",-1)),Il={key:0},kl=ot(()=>f("br",null,null,-1)),Ml=ot(()=>f("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),$l=ot(()=>f("br",null,null,-1)),xl=["href"],Fl=ot(()=>f("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),Tl=z({__name:"GameOverScreen",setup(e){const{title:t,logo:n,discordName:r,discordLink:i,versionNumber:s,versionTitle:d}=R,l=$(()=>Tt(D.timePlayed)),o=$(()=>Nn.value&&!D.keepGoing),m=$e(D,"autosave");function b(){D.keepGoing=!0}function v(){Ve(Ue())}return(y,S)=>(p(),q(Re,{"model-value":c(o)},{header:T(()=>[f("div",wl,[c(n)?(p(),N("img",{key:0,class:"game-over-modal-logo",src:c(n),alt:c(t)},null,8,Nl)):x("",!0),f("div",Sl,[Cl,f("h4",null,"You've beaten "+L(c(t))+" v"+L(c(s))+": "+L(c(d)),1)])])]),body:T(({shown:I})=>[I?(p(),N("div",Il,[f("div",null,"It took you "+L(c(l))+" to beat the game.",1),kl,Ml,$l,f("div",null,[f("a",{href:c(i),class:"game-over-modal-discord-link"},[Fl,V(" "+L(c(r)),1)],8,xl)]),w(ye,{title:"Autosave",modelValue:c(m),"onUpdate:modelValue":S[0]||(S[0]=C=>ae(m)?m.value=C:null)},null,8,["modelValue"])])):x("",!0)]),footer:T(()=>[f("div",{class:"game-over-footer"},[f("button",{onClick:b,class:"button"},"Keep Going"),f("button",{onClick:v,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}});var Pl=W(Tl,[["__scopeId","data-v-4a50ce42"]]);const yt=e=>(xe("data-v-d3bb0716"),e=e(),Fe(),e),El=yt(()=>f("div",{class:"nan-modal-header"},[f("h2",null,"NaN value detected!")],-1)),Vl={key:0},Ol=yt(()=>f("br",null,null,-1)),Ll=["href"],Dl=yt(()=>f("span",{class:"material-icons nan-modal-discord"},"discord",-1)),ql=yt(()=>f("br",null,null,-1)),Bl={class:"nan-footer"},Al=z({__name:"NaNScreen",setup(e){const{discordName:t,discordLink:n}=R,r=P(!0),i=P(!0),s=$e(Z,"hasNaN"),d=P(null);Me(s,y=>{y?(r.value=D.autosave,i.value=D.devSpeed===0):(D.autosave=r.value,D.devSpeed=i.value?0:null)});const l=$(()=>{var y;return(y=Z.NaNPath)==null?void 0:y.join(".")}),o=$(()=>Z.NaNPersistent!=null?Z.NaNPersistent.value:null);function m(){Z.NaNPersistent!=null&&(Z.NaNPersistent.value=new u(0),Z.hasNaN=!1)}function b(){Z.NaNPersistent&&(Z.NaNPersistent.value=new u(1),Z.hasNaN=!1)}function v(){Z.NaNPersistent&&(Z.NaNPersistent.value=new u(NaN),Z.hasNaN=!1)}return(y,S)=>(p(),N(re,null,[w(Re,De({modelValue:c(s),"onUpdate:modelValue":S[4]||(S[4]=I=>ae(s)?s.value=I:null)},y.$attrs),{header:T(()=>[El]),body:T(()=>[f("div",null,[V(' Attempted to assign "'+L(c(l))+'" to NaN',1),c(o)?(p(),N("span",Vl,L(" ")+"(previously "+L(c(tt)(c(o)))+")",1)):x("",!0),V(". Auto-saving has been "+L(r.value?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),Ol,f("div",null,[f("a",{href:c(n)||"https://discord.gg/yJ4fjnjU54",class:"nan-modal-discord-link"},[Dl,V(" "+L(c(t)||"Profectus & Friends"),1)],8,Ll)]),ql,w(ye,{title:"Autosave",modelValue:r.value,"onUpdate:modelValue":S[0]||(S[0]=I=>r.value=I)},null,8,["modelValue"]),c(R).enablePausing?(p(),q(ye,{key:0,title:"Pause game",modelValue:i.value,"onUpdate:modelValue":S[1]||(S[1]=I=>i.value=I)},null,8,["modelValue"])):x("",!0)]),footer:T(()=>[f("div",Bl,[f("button",{onClick:S[2]||(S[2]=I=>{var C;return(C=d.value)==null?void 0:C.open()}),class:"button"},"Open Saves Manager"),f("button",{onClick:m,class:"button"},"Set to 0"),f("button",{onClick:b,class:"button"},"Set to 1"),c(o)&&c(u).neq(c(o),0)&&c(u).neq(c(o),1)?(p(),N("button",{key:0,onClick:S[3]||(S[3]=I=>s.value=!1),class:"button"}," Set to previous ")):x("",!0),f("button",{onClick:v,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),w(pn,{ref_key:"savesManager",ref:d},null,512)],64))}});var Rl=W(Al,[["__scopeId","data-v-d3bb0716"]]);const zl={key:0,class:"tpsDisplay"},Ul=z({__name:"TPS",setup(e){const t=$(()=>u.div(Z.lastTenTicks.length,Z.lastTenTicks.reduce((n,r)=>n+r,0)));return(n,r)=>c(t).isNan()?x("",!0):(p(),N("div",zl,"TPS: "+L(c(Ft)(c(t))),1))}});var jl=W(Ul,[["__scopeId","data-v-89b89152"]]);var Gl=z({__name:"App",setup(e){const t=R.useHeader,n=$(()=>vt[X.theme].variables),r=$e(X,"showTPS"),i=$e(Z,"errors"),s=$(()=>be(ie(()=>w(re,null,[oi.map(Be)]))));return(d,l)=>c(i).length>0?(p(),N("div",{key:0,class:"error-container",style:se(c(n))},[w(Xt,{errors:c(i)},null,8,["errors"])],4)):(p(),N(re,{key:1},[f("div",{id:"modal-root",style:se(c(n))},null,4),f("div",{class:te(["app",{useHeader:c(t)}]),style:se(c(n))},[c(t)?(p(),q(vn,{key:0})):x("",!0),w(Wo),c(c(r))?(p(),q(jl,{key:1})):x("",!0),w(Pl),w(Rl),(p(),q(ue(c(s))))],6)],64))}});var Wl=W(Gl,[["__scopeId","data-v-bf4e22ac"]]);function Hl(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:d}=e;let l,o,m,b;const v=async(S=!0)=>{await m,S&&(l==null||l.addEventListener("controlling",I=>{I.isUpdate&&window.location.reload()})),await(b==null?void 0:b())};async function y(){if("serviceWorker"in navigator){const{Workbox:S,messageSW:I}=await et(()=>import("./workbox-window.4a8794bb.js"),[]);b=async()=>{o&&o.waiting&&await I(o.waiting,{type:"SKIP_WAITING"})},l=new S("./sw.js",{scope:"./",type:"classic"}),l.addEventListener("activated",C=>{C.isUpdate||r==null||r()});{const C=()=>{n==null||n()};l.addEventListener("waiting",C),l.addEventListener("externalwaiting",C)}l.register({immediate:t}).then(C=>{o=C,s?s("./sw.js",C):i==null||i(C)}).catch(C=>{d==null||d(C)})}}return m=y(),v}function Jl(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:d}=e,l=P(!1),o=P(!1);return{updateServiceWorker:Hl({immediate:t,onNeedRefresh(){l.value=!0,n==null||n()},onOfflineReady(){o.value=!0,r==null||r()},onRegistered:i,onRegisteredSW:s,onRegisterError:d}),offlineReady:o,needRefresh:l}}const At=console.error;console.error=function(...e){At(...e)};window.onerror=function(e,t,n,r,i){return Z.errors.push(i instanceof Error?i:new Error(JSON.stringify(i))),At(i),!0};window.onunhandledrejection=function(e){Z.errors.push(e.reason instanceof Error?e.reason:new Error(JSON.stringify(e.reason))),At(e.reason)};document.title=R.title;window.projInfo=R;R.id===""&&console.error("Project ID is empty!","Please select a unique ID for this project in /src/data/projInfo.json");requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await ti();const{globalBus:e}=await et(()=>Promise.resolve().then(function(){return ei}),void 0),{startGameLoop:t}=await et(()=>import("./gameLoop.cfea9cac.js"),["assets/gameLoop.cfea9cac.js","assets/@fontsource.f66d05e7.css","assets/vue.695b454e.js","assets/lz-string.bfbf8ec3.js","assets/@vue.6f8187b0.js","assets/nanoevents.1080beb7.js","assets/vue-next-select.51abf7d0.js","assets/vue-next-select.9e6f4164.css","assets/vuedraggable.24b135b5.js","assets/sortablejs.2121a25e.js","assets/vue-textarea-autosize.35804eaf.js","assets/vue-toastification.e087d307.js","assets/vue-toastification.4b5f8ac8.css"]),n=window.vue=Fn(Wl);n.config.errorHandler=function(r,i,s){console.error(r,s,i)},e.emit("setupVue",n),n.mount("#app"),Ge(()=>{const r=On(),{updateServiceWorker:i}=Jl({onNeedRefresh(){r.info("New content available, click here to update.",{timeout:!1,closeOnClick:!1,draggable:!1,icon:{iconClass:"material-icons",iconChildren:"refresh",iconTag:"i"},rtl:!1,onClick(){i()}})},onOfflineReady(){r.info("App ready to work offline")},onRegisterError:console.warn,onRegistered(s){s&&setInterval(()=>s.update(),60*60*1e3)}})}),t()});export{u as D,et as _,Z as a,R as b,_l as c,pe as g,ni as l,D as p,X as s};
